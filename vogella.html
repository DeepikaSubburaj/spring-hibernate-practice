<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.5">
<meta name="author" content="Fabian Pfaff, Jonas Hungershausen, Simon Scholz (c) 2017 - 2018 vogella GmbH">
<title>Spring Boot - Tutorial</title>
<script type='text/javascript'>window.mod_pagespeed_start = Number(new Date());</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="A.asciidoctor.css.pagespeed.cf.pHeShcvYJ5.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<link rel="stylesheet" href="http://www.vogella.com/A.tutorials,,_SpringBoot,,_coderay-asciidoctor.css+css,,_articles.css+css,,_header.css,Mcc.L1VVcQzMn_.css.pagespeed.cf.Sh2uncVEuJ.css"/>


<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<!-- Google analytics -->

<script type="text/javascript">var _gaq=_gaq||[];_gaq.push(['_setAccount','UA-3967758-1']);_gaq.push(['_setDomainName','vogella.com']);_gaq.push(['_setAllowLinker',true]);_gaq.push(['_trackPageview']);(function(){var ga=document.createElement('script');ga.type='text/javascript';ga.async=true;ga.src=('https:'==document.location.protocol?'https://ssl':'http://www')+'.google-analytics.com/ga.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(ga,s);})();</script>

<!-- Lake Quincy Ads Responsive -->
<script type='text/javascript'>var googletag=googletag||{};googletag.cmd=googletag.cmd||[];(function(){var gads=document.createElement('script');gads.async=true;gads.type='text/javascript';var useSSL='https:'==document.location.protocol;gads.src=(useSSL?'https:':'http:')+'//www.googletagservices.com/tag/js/gpt.js';var node=document.getElementsByTagName('script')[0];node.parentNode.insertBefore(gads,node);})();</script>

<script type='text/javascript'>googletag.cmd.push(function(){var mapping=googletag.sizeMapping().addSize([0,0],[300,250]).addSize([750,250],[300,250]).addSize([1170,200],[728,90]).build();googletag.defineSlot('/6839/lqm.javaeclipseandroid.site/right',[160,600],'ad-left').addService(googletag.pubads()).setTargeting('left');googletag.defineSlot('/6839/lqm.javaeclipseandroid.site/beforetoc',[[300,250],[728,90]],'ad-beforeTOC').defineSizeMapping(mapping).addService(googletag.pubads()).setTargeting('beforetoc');googletag.defineSlot('/6839/lqm.javaeclipseandroid.site/inbetween01',[[300,250],[728,90]],'ad-inBetween01').defineSizeMapping(mapping).addService(googletag.pubads()).setTargeting('inbetween01');googletag.defineSlot('/6839/lqm.javaeclipseandroid.site/inbetween02',[[300,250],[728,90]],'ad-inBetween02').defineSizeMapping(mapping).addService(googletag.pubads()).setTargeting('inbetween02');googletag.defineSlot('/6839/lqm.javaeclipseandroid.site/inbetween03',[[300,250],[728,90]],'ad-inBetween03').defineSizeMapping(mapping).addService(googletag.pubads()).setTargeting('inbetween03');googletag.defineSlot('/6839/lqm.javaeclipseandroid.site/afterresources',[[300,250],[728,90]],'ad-afterResources').defineSizeMapping(mapping).addService(googletag.pubads()).setTargeting('afterresources');googletag.pubads().enableSingleRequest();googletag.enableServices();});</script>

<!-- Begin Cookie Consent plugin by Silktide - http://silktide.com/cookieconsent -->
<script type="text/javascript">window.cookieconsent_options={"message":"We use cookies to personalise ads and to analyse our traffic. We also share information about your use of our site with our advertising and analytics partners. By using this site you agree to our cookie use.","dismiss":"Got it!","learnMore":"See details","link":"http://www.vogella.com/privacy.html","theme":"dark-bottom"};</script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/1.0.9/cookieconsent.min.js"></script>
<!-- End Cookie Consent plugin -->

<!-- Share on Facebook -->
<script language="javascript">function fbshareCurrentPage(){window.open("https://www.facebook.com/sharer/sharer.php?u="+escape(window.location.href),'','menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600');return false;}</script>

<!-- Share on Twitter -->
<script>function tweetCurrentPage(){window.open("https://twitter.com/share?url="+escape(window.location.href)+"&text="+document.title,'','menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600');return false;}</script>

<script>function openCloseNav(){if(document.getElementById("mobileTopnav").style.width==="150px"){document.getElementById("mobileTopnav").style.width="0";document.body.style.marginLeft="8px";}else{document.getElementById("mobileTopnav").style.width="150px";document.body.style.marginLeft="160px";}}</script>

<div id="mobileHeaderpart">
    <span onclick="openCloseNav()"><script data-pagespeed-no-defer>//<![CDATA[
(function(){var g=this;function h(b,d){var a=b.split("."),c=g;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var e;a.length&&(e=a.shift());)a.length||void 0===d?c[e]?c=c[e]:c=c[e]={}:c[e]=d};function l(b){var d=b.length;if(0<d){for(var a=Array(d),c=0;c<d;c++)a[c]=b[c];return a}return[]};function m(b){var d=window;if(d.addEventListener)d.addEventListener("load",b,!1);else if(d.attachEvent)d.attachEvent("onload",b);else{var a=d.onload;d.onload=function(){b.call(this);a&&a.call(this)}}};var n;function p(b,d,a,c,e){this.h=b;this.j=d;this.l=a;this.f=e;this.g={height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth};this.i=c;this.b={};this.a=[];this.c={}}function q(b,d){var a,c,e=d.getAttribute("data-pagespeed-url-hash");if(a=e&&!(e in b.c))if(0>=d.offsetWidth&&0>=d.offsetHeight)a=!1;else{c=d.getBoundingClientRect();var f=document.body;a=c.top+("pageYOffset"in window?window.pageYOffset:(document.documentElement||f.parentNode||f).scrollTop);c=c.left+("pageXOffset"in window?window.pageXOffset:(document.documentElement||f.parentNode||f).scrollLeft);f=a.toString()+","+c;b.b.hasOwnProperty(f)?a=!1:(b.b[f]=!0,a=a<=b.g.height&&c<=b.g.width)}a&&(b.a.push(e),b.c[e]=!0)}p.prototype.checkImageForCriticality=function(b){b.getBoundingClientRect&&q(this,b)};h("pagespeed.CriticalImages.checkImageForCriticality",function(b){n.checkImageForCriticality(b)});h("pagespeed.CriticalImages.checkCriticalImages",function(){r(n)});function r(b){b.b={};for(var d=["IMG","INPUT"],a=[],c=0;c<d.length;++c)a=a.concat(l(document.getElementsByTagName(d[c])));if(0!=a.length&&a[0].getBoundingClientRect){for(c=0;d=a[c];++c)q(b,d);a="oh="+b.l;b.f&&(a+="&n="+b.f);if(d=0!=b.a.length)for(a+="&ci="+encodeURIComponent(b.a[0]),c=1;c<b.a.length;++c){var e=","+encodeURIComponent(b.a[c]);131072>=a.length+e.length&&(a+=e)}b.i&&(e="&rd="+encodeURIComponent(JSON.stringify(t())),131072>=a.length+e.length&&(a+=e),d=!0);u=a;if(d){c=b.h;b=b.j;var f;if(window.XMLHttpRequest)f=new XMLHttpRequest;else if(window.ActiveXObject)try{f=new ActiveXObject("Msxml2.XMLHTTP")}catch(k){try{f=new ActiveXObject("Microsoft.XMLHTTP")}catch(v){}}f&&(f.open("POST",c+(-1==c.indexOf("?")?"?":"&")+"url="+encodeURIComponent(b)),f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f.send(a))}}}function t(){var b={},d=document.getElementsByTagName("IMG");if(0==d.length)return{};var a=d[0];if(!("naturalWidth"in a&&"naturalHeight"in a))return{};for(var c=0;a=d[c];++c){var e=a.getAttribute("data-pagespeed-url-hash");e&&(!(e in b)&&0<a.width&&0<a.height&&0<a.naturalWidth&&0<a.naturalHeight||e in b&&a.width>=b[e].o&&a.height>=b[e].m)&&(b[e]={rw:a.width,rh:a.height,ow:a.naturalWidth,oh:a.naturalHeight})}return b}var u="";h("pagespeed.CriticalImages.getBeaconData",function(){return u});h("pagespeed.CriticalImages.Run",function(b,d,a,c,e,f){var k=new p(b,d,a,e,f);n=k;c&&m(function(){window.setTimeout(function(){r(k)},0)})});})();pagespeed.CriticalImages.Run('/mod_pagespeed_beacon','http://www.vogella.com/tutorials/SpringBoot/article.html','BTd7sNKveK',true,false,'iLLzcPGnTI8');
//]]></script><img src="http://www.vogella.com/img/icons/burger.svg" alt="" data-pagespeed-url-hash="554668011" onload="pagespeed.CriticalImages.checkImageForCriticality(this);"/> </span>
    <div id="mobileLogo">
        <a title="vogella.com" href="http://www.vogella.com">
            <img src="http://www.vogella.com/img/logo/index_logo.svg" alt="vogella.com" data-pagespeed-url-hash="3884786107" onload="pagespeed.CriticalImages.checkImageForCriticality(this);"/>
        </a>
    </div>
</div>

<div id="mobileTopnav" class="sidenav">
    <a href="http://www.vogella.com/">Home</a>
    <a class="currentpage" href="http://www.vogella.com/tutorials/">Tutorials</a>
    <a href="http://www.vogella.com/training/">Training</a>
    <a href="http://www.vogella.com/consulting/">Consulting</a>
    <a href="http://www.vogella.com/products/">Products</a>
    <a href="http://www.vogella.com/books/">Books</a>
    <a href="http://www.vogella.com/company/">Company</a>
    <a href="http://www.vogella.com/support.html">Donate</a>
    <a style="margin-bottom:60px" href="http://www.vogella.com/contact.html">Contact us</a></div>

<div id="headerpart">

	<div id="logo">
		<a title="vogella.com" href="http://www.vogella.com">
			<img src="http://www.vogella.com/img/logo/xindex_logo.png.pagespeed.ic.MsfY6nLwK9.png" alt="vogella.com" data-pagespeed-url-hash="3884733576" onload="pagespeed.CriticalImages.checkImageForCriticality(this);"/>
		</a>
	</div> <!-- logo -->

	<div id="topnav">
		<ul id="home" class="topnav">
			<li id="home-icon"><a href="http://www.vogella.com/"></a></li>
			<li class="currentpage"> <a href="http://www.vogella.com/tutorials/">Tutorials</a>
				<ul>
					<li><a href="http://www.vogella.com/tutorials/eclipseide.html">Eclipse IDE</a></li>
					<li><a href="http://www.vogella.com/tutorials/eclipse.html">Eclipse RCP</a></li>
					<li><a href="http://www.vogella.com/tutorials/eclipseplatform.html">Eclipse IDE Extensions</a></li>
					<li><a href="http://www.vogella.com/tutorials/android.html">Android Programming</a></li>
					<li><a href="http://www.vogella.com/tutorials/web.html">Web</a></li>
					<li><a href="http://www.vogella.com/tutorials/java.html">Java</a></li>
					<li><a href="http://www.vogella.com/tutorials/technology.html">Technology</a></li>
					<li><a href="http://www.vogella.com/tutorials/algorithms.html">Software design</a></li>
					<li><a href="http://www.vogella.com/code/index.html">Source Code</a></li>
				</ul>
			</li>
			<li><a href="http://www.vogella.com/training/">Training</a>
				<ul>
					<li><a href="https://learn.vogella.com/">Self-study portal</a>
						<ul>
							<li><a href="https://learn.vogella.com/courses/details/rich-client-platform">Eclipse RCP</a></li>
							<li><a href="https://learn.vogella.com/courses/details/eclipse-ide-extensions">Eclipse Plug-in Development</a></li>
							<li><a href="https://learn.vogella.com/courses/details/android-development">Android Development</a></li>
						</ul>
					</li>
					<li><a href="http://www.vogella.com/training/onsite/index.html">Onsite training</a>
						<ul>
							<li><a href="http://www.vogella.com/training/eclipse/index.html">Eclipse Development Training</a>
								<ul>
									<li><a href="http://www.vogella.com/training/eclipse/eclipsercp.html">Eclipse RCP</a></li>
									<li><a href="http://www.vogella.com/training/eclipse/tycho.html">Testing and building Eclipse RCP</a></li>
									<li><a href="http://www.vogella.com/training/eclipse/eclipsercpmigration.html">Eclipse RCP Migration</a></li>
									<li><a href="http://www.vogella.com/training/eclipse/eclipseplugin.html">Eclipse IDE Plug-in Development</a></li>
									<li><a href="http://www.vogella.com/training/eclipse/rcpjavaeespring.html">Eclipse RCP with Spring Boot</a></li>
									<li><a href="http://www.vogella.com/training/eclipse/eclipsenattable.html">NatTable</a></li>
								</ul>
							</li>
							<li><a href="http://www.vogella.com/training/android/index.html">Android Development Training</a>
								<ul>
									<li><a href="http://www.vogella.com/training/android/androidprofessional.html">Android Professional</a></li>
									<!--<li><a href="http://www.vogella.com/training/android/androidtesting.html">Android Testing and Appl. Optimization</a></li>-->
									<!--<li><a href="http://www.vogella.com/training/android/androidexpert.html">Android Expert</a></li>-->
								</ul>
							</li>
							<li><a href="http://www.vogella.com/training/git/index.html">Git and Gerrit Training</a></li>
							<li><a href="http://www.vogella.com/training/programming/index.html">Programming Training</a>
								<ul>
									<li><a href="http://www.vogella.com/training/testbuild/javatesting.html">Java test technologies</a></li>
									<li><a href="http://www.vogella.com/training/programming/java.html">Java</a></li>
									<li><a href="http://www.vogella.com/training/testbuild/maven.html">Apache Maven</a></li>
									<li><a href="http://www.vogella.com/training/testbuild/gradle.html">Gradle</a></li>

								</ul>
							</li>
						</ul>
					</li>
				</ul>
			</li>

			<li><a href="http://www.vogella.com/consulting/">Consulting</a></li>

			<li><a href="http://www.vogella.com/company/">Company</a>
				<ul>
					<li><a href="http://www.vogella.com/aboutvogella.html">About us</a></li>
					<li><a href="http://www.vogella.com/jobs/">Jobs</a></li>
					<li><a href="http://www.vogella.com/people/index.html">People at vogella</a></li>
					<li><a href="http://www.vogella.com/customers.html" onclick="_gaq.push(['_trackEvent', 'Customers', 'clicked', 'Header']);">Reference Customers</a></li>
					<li><a href="http://blog.vogella.com/">Blog</a></li>
					<li><a href="http://www.vogella.com/books/">Books</a>
						<ul>
							<li><a href="http://www.vogella.com/books/eclipsercp.html">Eclipse RCP</a></li>
							<li><a href="http://www.vogella.com/books/eclipseide.html">Eclipse IDE</a></li>
							<li><a href="http://www.vogella.com/books/eclipsecontribution.html">Contributing to the Eclipse Project</a></li>
							<li><a href="http://www.vogella.com/books/git.html">Git</a></li>
						</ul>
					</li>
					<li><a href="http://www.vogella.com/supportslider.html">Donate</a></li>
					<li><a href="http://www.vogella.com/faq.html">FAQ</a></li>
					<li><a href="http://www.vogella.com/legal.html">Legal</a></li>
					<li><a href="http://www.vogella.com/privacy.html">Privacy Policy</a></li>
				</ul>
			</li>

			<li><a href="http://www.vogella.com/contact.html">Contact us</a></li>
		</ul>
	</div><!-- topnav -->

	<div id="searchfixed">
		<form action="http://www.vogella.com/search.html" id="cse-search-box">
			<div id="searchwrapper">

				<input type="hidden" name="cx" value="partner-pub-3851443674951530:3991491935"/>
				<input type="hidden" name="cof" value="FORID:10"/>
				<input type="hidden" name="ie" value="UTF-8"/>
				<input type="text" placeholder="Search" id="search_field" name="q" size="55"/>
				<input type="image" src="http://www.vogella.com/img/icons/xsrch.png.pagespeed.ic.BP8TtuQRzJ.png" id="search_button" name="sa" alt="Search"/>
			</div>
		</form>
	</div> <!-- searchfixed -->

</div> <!-- headerpart -->

<div id="leftcol">

	<br/>
	<br/>

	<script async="async" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- LeftColumn -->
	<ins class="adsbygoogle" style="display:inline-block;width:160px;height:600px" data-ad-client="ca-pub-3851443674951530" data-ad-slot="6294971031"></ins>
	<script>(adsbygoogle=window.adsbygoogle||[]).push({});</script>

	<br/>
	<br/>
	<br/>
	<br/>
	<br/>

	<!-- Responsive Lake Quincy Ads -->
	<div id='ad-left'>
		<script type='text/javascript'>googletag.cmd.push(function(){googletag.display('ad-left');});</script>
	</div>
</div> <!-- leftcolumn -->

<div id="rightcol">
	<br/>
	<br/>
	<!-- vogellas own advertising for training and books -->
	<div class="vogella_ads">
		<h1>Online training</h1>
			<ul><li>
				<a href="https://learn.vogella.com" onclick="_gaq.push(['_trackEvent', 'vogella Services', 'clicked', 'Learn more...']);">Learn more ...</a>
			</li></ul>
		<h1>Events</h1>
			<ul><li>
				<a href="http://www.vogella.com/training/eclipse/eclipsercp.html" onclick="_gaq.push(['_trackEvent', 'vogella Services', 'clicked', 'next RCP training']);">25 FEB - RCP Training</a>
			</li></ul>
		<h1>Quick links</h1>
		<ul>
			<li><a href="http://www.vogella.com/training/" onclick="_gaq.push(['_trackEvent', 'vogella Services', 'clicked', 'training']);">Onsite Training</a></li>
			<li><a href="http://www.vogella.com/consulting/" onclick="_gaq.push(['_trackEvent', 'vogella Services', 'clicked', 'consulting']);">Consulting</a></li>
			<li><a href="http://www.vogella.com/books/index.html" onclick="_gaq.push(['_trackEvent', 'vogella Services', 'clicked', 'books']);">Books</a></li>
		</ul>
		<h1>Share</h1>
		<div class="social_media_icons">
 			<a href="javascript:tweetCurrentPage()" onclick="_gaq.push(['_trackEvent', 'vogella Services', 'clicked', 'Tweet']);">
				<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAABnlBMVEUAAABUqetXruxVrO1Tq+1UquxVrOxVquxTrO5TrO5TrO5Vqu5VrO5WrO5Wre5Xre5Yre5Yru5aru5cr+9csO9dsO9esO9ese9gse9gsu9hsu9ks+9ltPBmtPBntfBotfBptvBqtvBst/BuuPFwufFyuvF0u/F1vPF2vPF6vvJ7v/J8v/J9wPJ+wPKAwfKCwvKCwvOEw/OFw/OJxfOKxvONx/SOyPSPyPSUy/SVy/SYzfWZzfWazvWe0PWg0fai0faj0val0/am0/am1Pan1Pao1Pao1fap1faq1faq1ver1vet1/eu2Pew2fex2fey2ve02ve02/i43Pi53fi63fi83vi93/i/4PnA4PnB4fnD4vnE4vnH5PnI5PnJ5frK5frL5vrN5/rO5/rQ6PrR6frS6frS6fvU6vvV6vvX6/va7fvd7vze7/zf7/zg8Pzi8fzm8/zm8/3n8/3o9P3q9f3r9f3s9v3u9/3w+P7x+P7y+P7z+f70+v71+v72+/73+/74/P75/P76/P76/f/7/f/8/f/9/v/+/v/+///////3hSxNAAAADHRSTlMAJymwsbKz7/Hz9PUEKU1xAAABy0lEQVRYw2NgYGLh5CETcLMxMTAwcfBQADiYGFh4KAKsDJyUGcDFwEMhGDVg1IARZICgRVJFe0O2lyyEq4jPAFUhTP2ahZ0Q0GjPw8NvmOiKz4D0GH50/YZNnXAQE1XZWSKKxwDpjs5oQVT9SnWdKKBWg0cYtwGGQBVpkihCcaj6i00tY2xwG2AOUlOihSQi345qQEdnZygeLxiBFbUFisNFLDrRQTgfHgNkoIqqHMSgIp5o2ttd8KeDTJjCuhBdcHx4oxlQRiAhGSKprY53MdFwRTOgmFBKDO7ED/LwG6BnJh6O34Bk/AaYdLbmN+E1IAi/AXKdhIAVgTBIJ2SACgEDtDvw6y8jWB544DcggHCB4o7XDWpElEhaqbiNyCCiSNN2dorHaYIBEQbINZGQirB6wRGn/kZlogzgjcRlgB2RxTqvSzNW/bG8RNcLCj65mCGRI0JKxSLkix4TOVIk1Ex8ZkXo9qdIEF+1qTgXo2tv9+cnqm7U8/MPS63EDL4CHWIrV60UbDnQWoCE2lk1sBw18SQY85NYvfOq20ZkldW31JTmRLvpC402cUYNGDWASAO4Ke14slFmADOFnW92RmD3nZWLbPczMzIAABk6M76T45HTAAAAAElFTkSuQmCC" alt="Tweet" title="Tweet" data-pagespeed-url-hash="2195515811" onload="pagespeed.CriticalImages.checkImageForCriticality(this);"/>
			</a>

			<a href="javascript:fbshareCurrentPage()" onclick="_gaq.push(['_trackEvent', 'vogella Services', 'clicked', 'Facebook']);">
				<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAA8FBMVEUAAABISJE/X584VI08WJU6Wpo7WZY6WZc6V5g7WJc7WZY6V5g6WJc5WZg7WJY7V5Y7WJg6V5g5V5Y7WZY7V5Y7WZY7WZg8Wpg+XJpBXptGYp5MZ6FNaaJOaaJPaqNRa6NUbqVYcqdZcqhddqpsg7JvhbNyh7VyiLV1ird2i7d4jbiLncKTo8aXp8idrMufrs2gr82ls9CntdGotdGqt9KuutSwvNW1wdi+yN3EzeDM0+TO1eXT2ujZ3+vf5O7g5e/i5vDm6vLo6/Ps7/Xv8ffw8/fx8/j09vn19/r29/r5+vz7/P38/P39/f7+/v////+2S0LTAAAAFnRSTlMABwgJLjCSlJWWl5iZv8HX2Nr0+fr+LdCWBAAAAZxJREFUeNrt21lPwkAUBeADpYDsUBgrWhcErahV3KuiYl1xuf//3/igT6a8mDgnIff8gfsl05mc+1AAQC5fbxnLaTfLLr6TKXUMJxUHADJVQ0vNAVAyxJSBXIcJMC7y1PlmAXUuoIEWF+DBkKMABShAAQqYU8DG7tnV5OlNfsUSYP1wIumxAuhdfIrwAEtHHyJEwOatCBOw9SxUwM67UAH9qVABa49CBfjXwgXsCRew+kIGnAoXsDIlAw6EC1i8JwP6QgYcswE3ZMCykAHbM0fejYa9rv/vpXR/xvjxwFIrPk+ff+LbquWX6fPt7QWpTXDs2wM8pAEGxh7gNe37t7mape0CI5uAtBMYsgE9NqDLBvhsgFGAAhQw1wD5WxI2IGYDIjYgZAMCMiBh34KYDYjYgJANCMiAhP0Ux2xAxAaEbEBABiTsPhCzAREbELIBgbZiBShAAQpQgAIUoAAFKEABClCAAhSgAAUoQAGzAG0uwEOTC6ijzAUU4HIBOaDCBBQBODUeoJoFAKfCAhSzP//fuwsNzzbAqxdyAPAFIiQ0Q3tq8TQAAAAASUVORK5CYII=" alt="Share on Facebook" title="Share on Facebook" data-pagespeed-url-hash="2074413958" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
			</a>
		</div>
	</div>
</div> <!--rightcol-->
</head>
<body class="article">
<div id="header">
<h1>Spring Boot - Tutorial</h1>
<div class="details">
<span id="author" class="author">Fabian Pfaff, Jonas Hungershausen, Simon Scholz (c) 2017 - 2018 vogella GmbH</span><br>
<span id="revnumber">version 0.2,</span>
<span id="revdate">08.06.2018</span>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#spring-boot">1. Spring Boot</a></li>
<li><a href="#example-spring-boot-application">2. Example Spring Boot Application</a></li>
<li><a href="#web_apps">3. Exercise - Configuring Spring Boot for web based applications</a></li>
<li><a href="#exercise-creating-a-web-controller">4. Exercise - Creating a  web @Controller</a></li>
<li><a href="#exercise-creating-an-entity-data-class">5. Exercise - Creating an entity data class</a></li>
<li><a href="#exercise-creating-templates-using-thymeleaf">6. Exercise - Creating Templates using Thymeleaf</a></li>
<li><a href="#exercise-embedding-a-database">7. Exercise - Embedding a database</a></li>
<li><a href="#exercise-making-the-information-available-via-rest">8. Exercise - Making the information available via REST</a></li>
<li><a href="#testing-spring-boot-applications">9. Testing Spring Boot Applications</a></li>
<li><a href="#rolling-back-database-changes-after-tests">10. Rolling back database changes after tests</a></li>
<li><a href="#test-annotations">11. Test annotations</a></li>
<li><a href="#mocking">12. Mocking</a></li>
<li><a href="#mockmvc">13. MockMvc</a></li>
<li><a href="#spring-boot-2-0">14. Spring Boot 2.0</a></li>
<li><a href="#exercise-create-a-reactive-spring-boot-project">15. Exercise: Create a reactive Spring Boot project</a></li>
<li><a href="#exercise-create-a-todo-domain-model">16. Exercise: Create a Todo domain model</a></li>
<li><a href="#exercise-creating-a-reactive-rest-controller">17. Exercise: Creating a reactive rest controller</a></li>
<li><a href="#optional-change-the-default-port-of-the-web-app">18. Optional: Change the default port of the web app</a></li>
<li><a href="#exercise-passing-parameters-to-the-rest-api">19. Exercise: Passing parameters to the rest api</a></li>
<li><a href="#exercise-posting-data-to-the-rest-controller">20. Exercise: Posting data to the rest controller</a></li>
<li><a href="#exercise-sending-a-delete-request">21. Exercise: Sending a delete request</a></li>
<li><a href="#exercise-creating-a-service-for-the-business-logic">22. Exercise: Creating a service for the business logic</a></li>
<li><a href="#exercise-reactive-database-access-with-spring-data">23. Exercise: Reactive database access with Spring Data</a></li>
<li><a href="#exercise-implement-custom-query-methods">24. Exercise: Implement custom query methods</a></li>
<li><a href="#exercise-using-example-objects-for-queries">25. Exercise: Using Example objects for queries</a></li>
<li><a href="#spring-boot-resources">26. Spring Boot resources</a></li>
<li><a href="#vogella-training-and-consulting-support">27. vogella training and consulting support</a></li>
<li><a href="#copyright-license-and-source-code">Appendix A: Copyright, License and Source code</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
Spring Boot is a rapid application development platform built on top of the popular Spring Framework.
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spring-boot"><a class="link" href="#spring-boot">1. Spring Boot</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>Spring Boot</code> is an opinionated framework built on top the <code>Spring Framework</code>.
You can find out more about the Spring framework and its modules in our <a href="http://www.vogella.com/tutorials/Spring/article.html">Spring tutorial</a>.</p>
</div>
<div class="paragraph">
<p>While Spring is very powerful and gives you many choices, it can also require a lot of manual configuration.
Spring Boot aims to be highly productive by providing default configuration for most features while still giving you the ability to easily change the behavior according to your needs.</p>
</div>
<div class="paragraph">
<p>Spring Boot is mostly used to create web applications but can also be used for command line applications.
A Spring Boot web application can be built to a stand-alone jar with an embedded web server that can be started with <code>java -jar</code>.
Spring Boot makes it easy to integrate the various Spring modules into your application through starter POMs that contain all necessary dependencies, which get auto configured.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="example-spring-boot-application"><a class="link" href="#example-spring-boot-application">2. Example Spring Boot Application</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>We will create our first Spring Boot application with the <code>Spring Tool Suite</code>, a powerful editor based on the Eclipse IDE.
You can download it from its <a href="https://spring.io/tools/sts">Spring project website</a>.</p>
</div>
<div class="paragraph">
<p>Once you have started the Spring Tool Suite click on <span class="menuseq"><span class="menu">File</span>&#160;&#9656; <span class="submenu">New</span>&#160;&#9656; <span class="menuitem">Spring Starter Project</span></span> to open the project creation wizard.
For the purpose of this example we&#8217;ll choose a Gradle based project with the web starter dependency.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/xspring_boot_sts_project_wizard1.png.pagespeed.ic.3ZJ3z0wEc8.png" alt="Spring Boot Project wizard page 1" data-pagespeed-url-hash="3236889688" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="img/xspring_boot_sts_project_wizard2.png.pagespeed.ic.taFv_LLzr1.png" alt="Spring Boot Project wizard page 2" data-pagespeed-url-hash="3531389609" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
</div>
</div>
<div class="paragraph">
<p>Alternatively you can create your project directly with the <a href="https://start.spring.io/">online wizard</a> and import it into your favorite IDE.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/xspring_boot_project_web_wizard.png.pagespeed.ic.azBUs6gbxo.png" alt="Spring Boot web wizard" data-pagespeed-url-hash="447481521" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
</div>
</div>
<div class="paragraph">
<p>Three folders were automatically created <code>src/main/java</code>, <code>src/main/resources</code> and <code>src/main/test.
`src/main/java</code> will be used to save all java source files, <code>src/main/resources</code> will be used for templates and any other files and <code>src/main/test</code> will be used for tests.</p>
</div>
<div class="paragraph">
<p>Open your project and create a new controller class named <code>HelloWorldController.java</code> in the <code>com.vogella.example</code> package of the <code>src/main/java</code> folder:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.vogella.example</span>;

<span class="keyword">import</span> <span class="include">org.springframework.stereotype.Controller</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.RequestMapping</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.ResponseBody</span>;

<span class="annotation">@Controller</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">HelloWorldController</span> {

    <span class="annotation">@RequestMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@ResponseBody</span>
    <span class="predefined-type">String</span> index() {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Hello, World!</span><span class="delimiter">&quot;</span></span>;
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now start the class <code>DemoApplication</code> as a <code>Spring Boot App</code>.
The embedded Tomcat server starts listening on port 8080.
When you point your browser to <code><a href="http://localhost:8080" class="bare">http://localhost:8080</a></code> you should see the welcome message:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/xhello_world_message.png.pagespeed.ic.KiPOeOx1PA.png" alt="hello_world_message.png" data-pagespeed-url-hash="763888037" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="web_apps"><a class="link" href="#web_apps">3. Exercise - Configuring Spring Boot for web based applications</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="target"><a class="link" href="#target">3.1. Target</a></h3>
<div class="paragraph">
<p>In the following exercises an issue reporting tool is created.
With this tool users can submit issues they found on a website.</p>
</div>
</div>
<div class="sect2">
<h3 id="configure"><a class="link" href="#configure">3.2. Configure</a></h3>
<div class="paragraph">
<p>First, there are a few dependencies that need to be added to the example project.
Such as:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Thymeleaf</dt>
<dd>
<p>Thymeleaf is a powerful template processing engine for the Spring framework.</p>
</dd>
<dt class="hdlist1">Spring Boot Devtools</dt>
<dd>
<p>The Spring Boot Devtools provides an ensemble of very useful tools that enhance the development experience a lot.
Such as Automatic recompiling upon saving and much more.</p>
</dd>
<dt class="hdlist1">Spring Data JPA</dt>
<dd>
<p>Spring Data JPA makes it easy to implement JPA based repositories and build Spring-powered applications that use data access technologies.</p>
</dd>
<dt class="hdlist1">H2</dt>
<dd>
<p>H2 is a Java SQL database. It&#8217;s a lightweight database that can be run in-memory.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>To add these dependencies to your project, just open the <code>build.gradle</code> file in the root folder of the project and add the following to the section 'dependencies'. Then <code>Right Click &gt; Gradle &gt; Refresh Gradle Project</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">    compile(<span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot:spring-boot-starter-thymeleaf</span><span class="delimiter">'</span></span>)
    runtime(<span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot:spring-boot-devtools</span><span class="delimiter">'</span></span>)
    compile(<span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot:spring-boot-starter-data-jpa</span><span class="delimiter">'</span></span>)
    runtime(<span class="string"><span class="delimiter">'</span><span class="content">com.h2database:h2</span><span class="delimiter">'</span></span>)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="validate"><a class="link" href="#validate">3.3. Validate</a></h3>
<div class="paragraph">
<p>Your <code>build.gradle</code> should now look like this</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">buildscript {
    ext {
        springBootVersion = <span class="string"><span class="delimiter">'</span><span class="content">1.5.8.RELEASE</span><span class="delimiter">'</span></span>
    }
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath(<span class="string"><span class="delimiter">&quot;</span><span class="content">org.springframework.boot:spring-boot-gradle-plugin:</span><span class="inline"><span class="inline-delimiter">${</span>springBootVersion<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>)
    }
}

apply <span class="key">plugin</span>: <span class="string"><span class="delimiter">'</span><span class="content">java</span><span class="delimiter">'</span></span>
apply <span class="key">plugin</span>: <span class="string"><span class="delimiter">'</span><span class="content">eclipse</span><span class="delimiter">'</span></span>
apply <span class="key">plugin</span>: <span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot</span><span class="delimiter">'</span></span>

group = <span class="string"><span class="delimiter">'</span><span class="content">com.vogella.example</span><span class="delimiter">'</span></span>
version = <span class="string"><span class="delimiter">'</span><span class="content">0.0.1-SNAPSHOT</span><span class="delimiter">'</span></span>
sourceCompatibility = <span class="float">1.8</span>

repositories {
    mavenCentral()
}


dependencies {
    compile(<span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot:spring-boot-starter-thymeleaf</span><span class="delimiter">'</span></span>)
    compile(<span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot:spring-boot-starter-web</span><span class="delimiter">'</span></span>)
    runtime(<span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot:spring-boot-devtools</span><span class="delimiter">'</span></span>)
    compile(<span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot:spring-boot-starter-data-jpa</span><span class="delimiter">'</span></span>)
    runtime(<span class="string"><span class="delimiter">'</span><span class="content">com.h2database:h2</span><span class="delimiter">'</span></span>)
    testCompile(<span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot:spring-boot-starter-test</span><span class="delimiter">'</span></span>)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Start your application with <code>Right Click on your Project &gt; Run As &gt; Spring Boot App</code>.
Since we have the <code>dev-tools</code> dependency added to the project we can use it&#8217;s <code>live-reload</code> functionality.
Without any further configuration it reloads the application every time you save a file in the project.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-creating-a-web-controller"><a class="link" href="#exercise-creating-a-web-controller">4. Exercise - Creating a  web @Controller</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>In <code>src/main/java</code> create a new package with the name <code>com.vogella.example.controller</code>.
In there create a new java Class named <code>IssueController</code>.
This class will contain the methods responsible for handling incoming web requests.</p>
</div>
<div class="paragraph">
<p>To tell Spring that this is a controller the class needs to have the <code>@Controller</code> annotation.
Place it right on top of the class declaration and add <code>import org.springframework.stereotype.Controller;</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.vogella.example.controller</span>;

<span class="keyword">import</span> <span class="include">org.springframework.stereotype.Controller</span>;

<span class="annotation">@Controller</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">IssueController</span> {

}</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="creating-controller-methods"><a class="link" href="#creating-controller-methods">4.1. Creating controller methods</a></h3>
<div class="paragraph">
<p>In the <code>IssueController</code> class, create the following Methods:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    <span class="annotation">@GetMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/issuereport</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@ResponseBody</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> getReport() {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">issues/issuereport_form</span><span class="delimiter">&quot;</span></span>;
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>This method later will return the base form template in which the user can submit the issue they found.
Right now it only returns a string, the functionality will be added later.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>@GetMapping</code> annotation above the method signals the Spring Core that this method should only handle <code>GET</code> requests.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Since this method is only be responsible for sending the required HTML files to the user, there should be another method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    <span class="annotation">@PostMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/issuereport</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@ResponseBody</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> submitReport() {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">issues/issuereport_form</span><span class="delimiter">&quot;</span></span>;
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>This method will be responsible for handling the user input after submitting the form.
When the data is received and handled (e.g. added to the database), this method returns the same <code>issuereport</code> template from the first controller method.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>@PostMapping</code> annotation signals that this method should only handle <code>POST</code> requests and thus only gets called when a <code>POST</code> request is received.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The next method will handle the HTML template for a list view in which all the requests can be viewed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    <span class="annotation">@GetMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/issues</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@ResponseBody</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> getIssues() {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">issues/issuereport_list</span><span class="delimiter">&quot;</span></span>;
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>This method will return a template with a list of all reports that were submitted.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>@ResponseBody</code> annotation will be removed in a later step.
For now we need to output just the text to the HTML page.
If we would remove it now the framework would search for a template with the given name and since there is none would throw an error.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="validate-2"><a class="link" href="#validate-2">4.2. Validate</a></h3>
<div class="paragraph">
<p>The <code>IssueController</code> should now look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.vogella.example.controller</span>;

<span class="keyword">import</span> <span class="include">org.springframework.stereotype.Controller</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.GetMapping</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.PostMapping</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.ResponseBody</span>;

<span class="annotation">@Controller</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">IssueController</span> {
    <span class="annotation">@GetMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/issuereport</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@ResponseBody</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> getReport() {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">issues/issuereport_form</span><span class="delimiter">&quot;</span></span>;
    }
    <span class="annotation">@PostMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/issuereport</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@ResponseBody</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> submitReport() {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">issues/issuereport_form</span><span class="delimiter">&quot;</span></span>;
    }
    <span class="annotation">@GetMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/issues</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@ResponseBody</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> getIssues() {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">issues/issuereport_list</span><span class="delimiter">&quot;</span></span>;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since we use the dependency <code>dev-tools</code> of the SpringBoot framework the server already recompiled the code for us.
We only need to refresh the page.
If you navigate to <a href="http://localhost:8080/issuereport">localhost:8080/issuereport</a> you should see the text <code>issuereport_form</code>.</p>
</div>
<!-- Non responsive Lake Quincy Ads
<div data-type="ad" data-publisher="lqm.javaeclipseandroid.site" data-zone="inBetween01" data-format="728x90">
</div> -->

<!-- Responsive Lake Quincy Ads -->
<div id='ad-inBetween01'>
	<script type='text/javascript'>googletag.cmd.push(function(){googletag.display('ad-inBetween01');});</script>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-creating-an-entity-data-class"><a class="link" href="#exercise-creating-an-entity-data-class">5. Exercise - Creating an entity data class</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="target-2"><a class="link" href="#target-2">5.1. Target</a></h3>
<div class="paragraph">
<p>In this exercise we will create a data class that contains all the relevant information, essentially representing an issue report from a user.</p>
</div>
</div>
<div class="sect2">
<h3 id="setup"><a class="link" href="#setup">5.2. Setup</a></h3>
<div class="paragraph">
<p>Create a new class in the <code>com.vogella.example</code> package and name it <code>IssueReport</code>.</p>
</div>
<div class="paragraph">
<p>Add the <code>@Entity</code> annotation.
This tells our JPA provider Hibernate that this class should be mapped to the database.
Also set the database table name with the <code>@Table(name = "issues")</code> annotation.
By explicitly setting the table name you avoid the possibility of accidently breaking the database mapping by renaming the class later on.</p>
</div>
</div>
<div class="sect2">
<h3 id="adding-fields-to-the-entity-data-class"><a class="link" href="#adding-fields-to-the-entity-data-class">5.3. Adding fields to the entity data class</a></h3>
<div class="paragraph">
<p>Add the following fields and a default constructor to the class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    <span class="annotation">@Id</span>
    <span class="annotation">@GeneratedValue</span>(strategy = GenerationType.AUTO)
    <span class="directive">private</span> <span class="type">long</span> id;
    <span class="directive">private</span> <span class="predefined-type">String</span> email;
    <span class="directive">private</span> <span class="predefined-type">String</span> url;
    <span class="directive">private</span> <span class="predefined-type">String</span> description;
    <span class="directive">private</span> <span class="type">boolean</span> markedAsPrivate;
    <span class="directive">private</span> <span class="type">boolean</span> updates;
    <span class="directive">private</span> <span class="type">boolean</span> done;
    <span class="directive">private</span> <span class="predefined-type">Date</span> created;
    <span class="directive">private</span> <span class="predefined-type">Date</span> updated;

    <span class="directive">public</span> IssueReport() {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The values of the fields <code>email</code>, <code>url</code>, <code>description</code>, <code>markedAsPrivate</code> and <code>updates</code> will be coming from the form the user submitted.
The others will be generated on creation or when the report is updated.</p>
</div>
<div class="paragraph">
<p>To let Spring instanciate the <code>Issue</code> object from the submitted html form we have to implement <code>getters</code> and <code>setters</code>, as Spring expects a valid Java Bean and won&#8217;t use reflection to set the fields.
To automatically generate them <code>Right Click</code> in the source code window of the <code>IssueReport</code> class. Then select the <code>Source</code> sub-menu; from that menu selecting <code>Generate Getters and Setters</code> will cause a wizard window to appear.
Select the fields (in this case all of them) that you want <code>getters</code> and <code>setters</code> to be generated for.
Confirm with ok.</p>
</div>
</div>
<div class="sect2">
<h3 id="validation"><a class="link" href="#validation">5.4. Validation</a></h3>
<div class="paragraph">
<p>Your <code>IssueReport</code> class should look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.vogella.example.entity</span>;

<span class="keyword">import</span> <span class="include">java.sql.Date</span>;
<span class="keyword">import</span> <span class="include">javax.persistence.Entity</span>;
<span class="keyword">import</span> <span class="include">javax.persistence.GeneratedValue</span>;
<span class="keyword">import</span> <span class="include">javax.persistence.GenerationType</span>;
<span class="keyword">import</span> <span class="include">javax.persistence.Id</span>;

<span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">IssueReport</span> {
    <span class="annotation">@Id</span>
    <span class="annotation">@GeneratedValue</span>(strategy = GenerationType.AUTO)
    <span class="directive">private</span> <span class="type">long</span> id;
    <span class="directive">private</span> <span class="predefined-type">String</span> email;
    <span class="directive">private</span> <span class="predefined-type">String</span> url;
    <span class="directive">private</span> <span class="predefined-type">String</span> description;
    <span class="directive">private</span> <span class="type">boolean</span> markedAsPrivate;
    <span class="directive">private</span> <span class="type">boolean</span> updates;
    <span class="directive">private</span> <span class="type">boolean</span> done;
    <span class="directive">private</span> <span class="predefined-type">Date</span> created;
    <span class="directive">private</span> <span class="predefined-type">Date</span> updated;

    <span class="directive">public</span> IssueReport() {}

    <span class="directive">public</span> <span class="predefined-type">String</span> getEmail() {
        <span class="keyword">return</span> email;
    }

    <span class="directive">public</span> <span class="type">void</span> setEmail(<span class="predefined-type">String</span> email) {
        <span class="local-variable">this</span>.email = email;
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getUrl() {
        <span class="keyword">return</span> url;
    }

    <span class="directive">public</span> <span class="type">void</span> setUrl(<span class="predefined-type">String</span> url) {
        <span class="local-variable">this</span>.url = url;
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getDescription() {
        <span class="keyword">return</span> description;
    }

    <span class="directive">public</span> <span class="type">void</span> setDescription(<span class="predefined-type">String</span> description) {
        <span class="local-variable">this</span>.description = description;
    }

    <span class="directive">public</span> <span class="type">boolean</span> isMarkedAsPrivate() {
        <span class="keyword">return</span> markedAsPrivate;
    }

    <span class="directive">public</span> <span class="type">void</span> setMarkedAsPrivate(<span class="type">boolean</span> markedAsPrivate) {
        <span class="local-variable">this</span>.markedAsPrivate = markedAsPrivate;
    }

    <span class="directive">public</span> <span class="type">boolean</span> isUpdates() {
        <span class="keyword">return</span> updates;
    }

    <span class="directive">public</span> <span class="type">void</span> setUpdates(<span class="type">boolean</span> updates) {
        <span class="local-variable">this</span>.updates = updates;
    }

    <span class="directive">public</span> <span class="type">boolean</span> isDone() {
        <span class="keyword">return</span> done;
    }

    <span class="directive">public</span> <span class="type">void</span> setDone(<span class="type">boolean</span> done) {
        <span class="local-variable">this</span>.done = done;
    }

    <span class="directive">public</span> <span class="predefined-type">Date</span> getCreated() {
        <span class="keyword">return</span> created;
    }

    <span class="directive">public</span> <span class="type">void</span> setCreated(<span class="predefined-type">Date</span> created) {
        <span class="local-variable">this</span>.created = created;
    }

    <span class="directive">public</span> <span class="predefined-type">Date</span> getUpdated() {
        <span class="keyword">return</span> updated;
    }

    <span class="directive">public</span> <span class="type">void</span> setUpdated(<span class="predefined-type">Date</span> updated) {
        <span class="local-variable">this</span>.updated = updated;
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-creating-templates-using-thymeleaf"><a class="link" href="#exercise-creating-templates-using-thymeleaf">6. Exercise - Creating Templates using Thymeleaf</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Thymeleaf is a powerful template engine that can be used with the Spring framework.
It lets you write plain HTML code while also using Java objects for data binding.
You&#8217;ve already added the Library to your project when you configured it in <a href="#web_apps">Exercise - Configuring Spring Boot for web based applications</a>.</p>
</div>
<div class="sect2">
<h3 id="html-templates"><a class="link" href="#html-templates">6.1. HTML Templates</a></h3>
<div class="paragraph">
<p>In the root folder of your project there is another folder called <code>src/main/resources</code>.
This contains all resources you need in your SpringBoot application.
This is where we create our templates.
Create and open the folder <code>src/main/resources/templates/issues</code> and create a new file called <code>issuereport_form.html</code> in it.
This is the file that will be served on the route <code>/issuereport</code>.
Create another file with the name <code>issuereport_list.html</code> in the same folder.
This file will be served on the <code>/issues</code> route.
But to achieve this, we need to configure our controller to do so.</p>
</div>
</div>
<div class="sect2">
<h3 id="serving-html-templates"><a class="link" href="#serving-html-templates">6.2. Serving HTML Templates</a></h3>
<div class="paragraph">
<p>Currently all our controller methods feature the <code>@ResponseBody</code> annotation.
With this annotation in place the String returned by our controller methods gets sent to the browser as plain text.
If we remove it, the Thymeleaf library will look for an HTML Template with the name returned.</p>
</div>
<div class="paragraph">
<p>Each route will then return the name of the template it should serve.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">getReport()</dt>
<dd>
<p><code>issues/issuereport_form</code></p>
</dd>
<dt class="hdlist1">submitReport()</dt>
<dd>
<p><code>issues/issuereport_form</code></p>
</dd>
<dt class="hdlist1">getIssues()</dt>
<dd>
<p><code>issues/issurereport_list</code></p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You specify the folder structure inside your <code>templates</code> folder separated by forward slashes. But it&#8217;s important that the String doesn&#8217;t start with a <code>/</code>. So this <strong>won&#8217;t</strong> work: <code>/issues/issuerepor_form</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Since we want to pass data into the template we also need to add a <code>Model</code> to the method parameters.
Add <code>Model model</code> to the controller methods parameters. These will be automatically injected when the endpoint is called.
Since this is fully done by the Spring framework we don&#8217;t have to worry about this.
In the next step we&#8217;ll add attributes to the <code>Model</code> object to make them available in the template.</p>
</div>
<div class="paragraph">
<p>The <code>IssueController</code> class should look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Java"><span class="keyword">package</span> <span class="namespace">com.vogella.example.controller</span>;

<span class="keyword">import</span> <span class="include">org.springframework.stereotype.Controller</span>;
<span class="keyword">import</span> <span class="include">org.springframework.ui.Model</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.GetMapping</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.PostMapping</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.ResponseBody</span>;

<span class="annotation">@Controller</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">IssueController</span> {
    <span class="annotation">@GetMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/issuereport</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> getReport(Model model) {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">issues/issuereport_form</span><span class="delimiter">&quot;</span></span>;
    }
    <span class="annotation">@PostMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/issuereport</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> submitReport(Model model) {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">issues/issuereport_form</span><span class="delimiter">&quot;</span></span>;
    }
    <span class="annotation">@GetMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/issues</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> getIssues(Model model) {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">issues/issuereport_list</span><span class="delimiter">&quot;</span></span>;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now the Framework will look for the templates with the given name and serve them to the browser.</p>
</div>
</div>
<div class="sect2">
<h3 id="binding-objects-to-templates"><a class="link" href="#binding-objects-to-templates">6.3. Binding objects to templates</a></h3>
<div class="paragraph">
<p>Now we want to pass some data to the template.
This is done by adding an object and optionally a name to the <code>Model</code> object passed in by the Spring framework.
Use the <code>addAttribute()</code> method to achieve this.
The first parameter is the name, the second parameter is an object.
You will use this name to refer to this object in the template.</p>
</div>
<div class="paragraph">
<p>For the initial form route pass an empty object of the data class you created in the previous exercise.
Add <code>model.addAttribute("issuereport", new IssueReport());</code> to the method <code>getReport()</code>.</p>
</div>
<div class="paragraph">
<p>Repeat the same for the method <code>submitReport()</code>.</p>
</div>
<div class="paragraph">
<p>In the <code>submitReport()</code> method we also want to handle the data submitted via the form.
To do this we also need to add <code>IssueReport issueReport</code> to the method parameters.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This will also be automatically constructed from the form data and injected by the Spring framework.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Since we want the template to show some kind of feedback upon receiving the form data, we should also add another attribute containing a boolean.
If it&#8217;s set to <code>true</code> the template will show some kind of modal or confirming message.</p>
</div>
<div class="paragraph">
<p>Just add another attribute with the name <code>submitted</code> and the value <code>true</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Since this boolean is only passed to the template if the route hit from the user was via <code>POST</code> HTTP method (and thus only upon form submission) the confirmation message is ONLY shown after the form was submitted.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="validate-3"><a class="link" href="#validate-3">6.3.1. Validate</a></h4>
<div class="paragraph">
<p>The methods should now look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.vogella.example.controller</span>;

<span class="keyword">import</span> <span class="include">org.springframework.stereotype.Controller</span>;
<span class="keyword">import</span> <span class="include">org.springframework.ui.Model</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.GetMapping</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.PostMapping</span>;

<span class="keyword">import</span> <span class="include">com.vogella.example.entity.IssueReport</span>;

<span class="annotation">@Controller</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">IssueController</span> {
    <span class="annotation">@GetMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/issuereport</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> getReport(Model model) {
        model.addAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">issuereport</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> IssueReport());
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">issues/issuereport_form</span><span class="delimiter">&quot;</span></span>;
    }
    <span class="annotation">@PostMapping</span>(value=<span class="string"><span class="delimiter">&quot;</span><span class="content">/issuereport</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> submitReport(IssueReport issueReport, Model model) {
        model.addAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">issuereport</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> IssueReport());
        model.addAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">submitted</span><span class="delimiter">&quot;</span></span>, <span class="predefined-constant">true</span>);
       <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">issues/issuereport_form</span><span class="delimiter">&quot;</span></span>;
    }
    <span class="annotation">@GetMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/issues</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> getIssues(Model model) {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">issues/issuereport_list</span><span class="delimiter">&quot;</span></span>;
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="creating-a-template"><a class="link" href="#creating-a-template">6.4. Creating a template</a></h3>
<div class="paragraph">
<p>To use the objects passed in, we need to use specific Thymeleaf HTML syntax in the templates.
All properties and attributes in an HTML file that are being used by Thymeleaf and are not standard HTML.
They will begin with the prefix <code>th:</code>.</p>
</div>
<div class="paragraph">
<p>We will start with the following basic HTML document with a form in it.
Add the following coding to the <code>issuereport_form.html</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="HTML"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;head&gt;</span>
    <span class="tag">&lt;title&gt;</span>Vogella Issuereport<span class="tag">&lt;/title&gt;</span>
    <span class="tag">&lt;link</span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">stylesheet</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">./style.css</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">UTF-8</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">container</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;form</span> <span class="attribute-name">method</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">post</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;h3&gt;</span>Vogella Issuereport<span class="tag">&lt;/h3&gt;</span>
            <span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">placeholder</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Email</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">email</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">placeholder</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Url where the issue was found on</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">url</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;textarea</span> <span class="attribute-name">placeholder</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Description of the issue</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">rows</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">5</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/textarea&gt;</span>

            <span class="tag">&lt;label</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">private_id</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
               Private?
               <span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">checkbox</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">private</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">private_id</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;/label&gt;</span>
            <span class="tag">&lt;label</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">updates_id</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                Keep me posted
                <span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">checkbox</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">updates_id</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">updates</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;/label&gt;</span>

            <span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Submit</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/form&gt;</span>

        <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">result_message</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;h3&gt;</span>Your report has been submitted.<span class="tag">&lt;/h3&gt;</span>
            <span class="tag">&lt;p&gt;</span>Find all issues <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/issues</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>here<span class="tag">&lt;/a&gt;</span><span class="tag">&lt;/p&gt;</span>
        <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This does not have any logic or data-binding in it, yet.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Without the attribute <code>xmlns:th="http://www.thymeleaf.org"</code> in the <code>&lt;html&gt;</code> tag, your editor might show warnings because he doesn&#8217;t know the attributes prefixed with <code>th:</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now the file will be served on the route <a href="http://localhost:8080/issuereport"><code>/issuereport</code></a>.
If you have the application still running you can navigate to the route or click the link.</p>
</div>
</div>
<div class="sect2">
<h3 id="data-binding"><a class="link" href="#data-binding">6.5. Data-binding</a></h3>
<div class="paragraph">
<p>Now we want to tell Spring that this form should populate the fields of the <code>IssueReport</code> object we passed earlier.
This is done by adding <code>th:object="${issuereport}"</code> to the <code>&lt;form&gt;</code> tag in <code>issuereport_form.html</code>:
<code>&lt;form method="post" th:action="@{/issuereport}" th:object="${issuereport}"&gt;</code></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>th:action</code> is the syntax for adding the action that should happen upon submission of the form.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Remember that we set the name of the <code>IssueReport</code> object to <code>issuereport</code>? We refer to it now by using that name.
The same can be done with any name and object.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This alone will not tell Spring to auto-populate the fields in the object.
We need to specify in the <code>&lt;input&gt;</code> elements what field this should represent.
This is done by adding the attribute <code>th:field="*{}"</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>${}</code> is the way to refer to objects that were passed to the template, using SpEL. <code>*{}</code> is the syntax to refer to fields of the object bound to the form.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Add the following attributes to the <code>&lt;input&gt;</code> and <code>&lt;textarea&gt;</code> elements respectively.</p>
</div>
<div class="paragraph">
<p><code>&lt;input type="text" placeholder="Email" id="email" th:field="*{email}"/&gt;</code></p>
</div>
<div class="paragraph">
<p><code>&lt;input type="text" placeholder="Url where the issue was found on" id="url" th:field="*{url}"/&gt;</code></p>
</div>
<div class="paragraph">
<p><code>&lt;textarea placeholder="Description of the issue" rows="5" id="description" th:field="*{description}"&gt;&lt;/textarea&gt;</code></p>
</div>
<div class="paragraph">
<p><code>&lt;input type="checkbox" name="private" id="private_id" th:field="*{markedAsPrivate}"/&gt;</code></p>
</div>
<div class="paragraph">
<p><code>&lt;input type="checkbox" id="updates_id" name="updates" th:field="*{updates}"/&gt;</code></p>
</div>
<div class="paragraph">
<p>We also wanted to show some kind of confirmation modal upon submission.
A modal for this already exists in the template: <code>&lt;div class="result_message"&gt;</code>.
But this should obviously be hidden until the user submits an issue.
This is done via a conditional expression.
Namely <code>th:if=""</code>.</p>
</div>
<div class="paragraph">
<p>Remember that we passed a boolean with the name <code>submitted</code> in the <code>submitReport()</code> method?
We could now use this to determine if we should show the confirmation modal.</p>
</div>
<div class="paragraph">
<p>Add <code>th:if="${submitted}"</code> to the <code>&lt;div class="result_message"&gt;</code>.
The result should look like this: <code>&lt;div class="result_message" th:if="${submitted}"&gt;</code></p>
</div>
<div class="paragraph">
<p>Now the class <code>result_message</code> will only be displayed if <code>submitted</code> is <code>true</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The reason for this is that we hardcoded the <code>submitted</code> boolean ONLY to the <code>POST</code> request mapping.
Thus it will only be added to the template if the <code>HTTP</code> method was <code>POST</code>.
So only if the form was submitted.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>issuereport_form.html</code> should now look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="HTML"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;head&gt;</span>
    <span class="tag">&lt;title&gt;</span>Vogella Issuereport<span class="tag">&lt;/title&gt;</span>
<span class="tag">&lt;link</span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">stylesheet</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">./style.css</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">UTF-8</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">container</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;form</span> <span class="attribute-name">method</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">post</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">th:object</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${issuereport}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">th:action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">@{/issuereport}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;h3&gt;</span>Vogella Issue Report<span class="tag">&lt;/h3&gt;</span>
            <span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">placeholder</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Email</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">email</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">th:field</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">*{email}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">placeholder</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Url where the issue was found on</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">url</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">th:field</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">*{url}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
            <span class="tag">&lt;textarea</span> <span class="attribute-name">placeholder</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Description of the issue</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">rows</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">5</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">th:field</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">*{description}</span><span class="delimiter">&quot;</span></span> <span class="tag">&gt;</span><span class="tag">&lt;/textarea&gt;</span>

            <span class="tag">&lt;label</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">private_id</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                Private?
                <span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">checkbox</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">private</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">private_id</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">th:field</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">*{markedAsPrivate}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
            <span class="tag">&lt;/label&gt;</span>

            <span class="tag">&lt;label</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">updates_id</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                Keep me posted
                <span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">checkbox</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">updates_id</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">updates</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">th:field</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">*{updates}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
            <span class="tag">&lt;/label&gt;</span>

            <span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Submit</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/form&gt;</span>


        <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">result_message</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">th:if</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${submitted}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;h3&gt;</span>Your report has been submitted.<span class="tag">&lt;/h3&gt;</span>
            <span class="tag">&lt;p&gt;</span>Find all issues <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/issues</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>here<span class="tag">&lt;/a&gt;</span><span class="tag">&lt;/p&gt;</span>
        <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="list-view"><a class="link" href="#list-view">6.6. List view</a></h3>
<div class="paragraph">
<p>Now we will create the HTML page for the issue report list.
Add the following coding to <code>issuereport_list.html</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.thymeleaf.org</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;head&gt;</span>
    <span class="tag">&lt;title&gt;</span>Vogella Issuereport<span class="tag">&lt;/title&gt;</span>
    <span class="tag">&lt;link</span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">stylesheet</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">./style.css</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">UTF-8</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">container issue_list</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;h2&gt;</span>Issues<span class="tag">&lt;/h2&gt;</span>
        <span class="tag">&lt;br</span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;table&gt;</span>
            <span class="tag">&lt;tr&gt;</span>
                <span class="tag">&lt;th&gt;</span>Url<span class="tag">&lt;/th&gt;</span>
                <span class="tag">&lt;th</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">desc</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Description<span class="tag">&lt;/th&gt;</span>
                <span class="tag">&lt;th&gt;</span>Done<span class="tag">&lt;/th&gt;</span>
                <span class="tag">&lt;th&gt;</span>Created<span class="tag">&lt;/th&gt;</span>
            <span class="tag">&lt;/tr&gt;</span>
            <span class="tag">&lt;th:block</span> <span class="attribute-name">th:each</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">issue : ${issues}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;tr&gt;</span>
                    <span class="tag">&lt;td</span> <span class="tag">&gt;</span><span class="tag">&lt;a</span> <span class="attribute-name">th:href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">@{${issue.url}}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${issue.url}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/a&gt;</span><span class="tag">&lt;/td&gt;</span>
                    <span class="tag">&lt;td</span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${issue.description}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>...<span class="tag">&lt;/td&gt;</span>
                    <span class="tag">&lt;td&gt;</span><span class="tag">&lt;span</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">status</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">th:classappend</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${issue.done} ? done : pending</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/span&gt;</span><span class="tag">&lt;/td&gt;</span>
                    <span class="tag">&lt;td</span> <span class="attribute-name">th:text</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${issue.created}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>...<span class="tag">&lt;/td&gt;</span>
                <span class="tag">&lt;/tr&gt;</span>
            <span class="tag">&lt;/th:block&gt;</span>
        <span class="tag">&lt;/table&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>th:classappend</code> conditionally adds classes to an element if the expression passed to it is true or false.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>th:each="issue : ${issues}</code> will loop over the issues list.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="optional-stylesheets"><a class="link" href="#optional-stylesheets">6.7. Optional: Stylesheets</a></h3>
<div class="paragraph">
<p>If you want to have some styling for the page, this snippet styles it a bit.
This is optional and does not change the behavior of the application in any way.
It is already linked to both HTML pages via the <code>&lt;link rel="stylesheet" href="./style.css" /&gt;</code> element in the <code>&lt;head&gt;</code> section.
Create a new file in the <code>static</code> folder in <code>src/main/resources</code>.
Name it <code>style.css</code> and copy the following snippet into it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="CSS"><span class="tag">*</span>{
    <span class="key">padding</span>: <span class="float">0</span>;
    <span class="key">margin</span>: <span class="float">0</span>;
    <span class="key">box-sizing</span>: <span class="value">border-box</span>;
}
<span class="tag">body</span>{
    <span class="key">font-family</span>: <span class="value">sans-serif</span>;
}
<span class="class">.container</span> {
    <span class="key">width</span>: <span class="float">100</span><span class="value">vw</span>;
    <span class="key">height</span>: <span class="float">100</span><span class="value">vh</span>;
    <span class="key">padding</span>: <span class="float">100px</span> <span class="float">0</span>;
    <span class="key">text-align</span>: <span class="value">center</span>;
}
<span class="class">.container</span> <span class="tag">form</span>{
    <span class="key">width</span>: <span class="float">100%</span>;
    <span class="key">height</span>: <span class="float">100%</span>;
    <span class="key">margin</span>: <span class="float">0</span> <span class="value">auto</span>;
    <span class="key">max-width</span>: <span class="float">350px</span>;
}
<span class="class">.container</span> <span class="tag">form</span> <span class="tag">input</span>[<span class="attribute-name">type=&quot;text&quot;</span>], <span class="class">.container</span> <span class="tag">form</span> <span class="tag">textarea</span>{
    <span class="key">width</span>: <span class="float">100%</span>;
    <span class="key">padding</span>: <span class="float">10px</span>;
    <span class="key">border-radius</span>: <span class="float">3px</span>;
    <span class="key">border</span>: <span class="float">1px</span> <span class="value">solid</span> <span class="color">#b8b8b8</span>;
    <span class="key">font-family</span>: <span class="value">inherit</span>;
    <span class="key">margin-bottom</span>: <span class="float">20px</span>;
}
<span class="class">.container</span> <span class="tag">h3</span>{
    <span class="key">margin-bottom</span>: <span class="float">20px</span>;
}
<span class="class">.container</span> <span class="tag">form</span> <span class="tag">input</span>[<span class="attribute-name">type=&quot;submit&quot;</span>]{
    <span class="key">max-width</span>: <span class="float">250px</span>;
    <span class="key">margin</span>: <span class="value">auto</span>;
    <span class="key">display</span>: <span class="value">block</span>;
    <span class="key">width</span>: <span class="float">55%</span>;
    <span class="key">padding</span>: <span class="float">10px</span>;
    <span class="key">background</span>: <span class="value">darkorange</span>;
    <span class="key">border</span>: <span class="float">1px</span> <span class="value">solid</span> <span class="color">#b8b8b8</span>;
    <span class="key">border-radius</span>: <span class="float">3px</span>;
    <span class="key">margin-top</span>: <span class="float">20px</span>;
    <span class="key">cursor</span>: <span class="value">pointer</span>;
}
<span class="class">.issue_list</span> <span class="tag">table</span>{
    <span class="key">text-align</span>: <span class="value">left</span>;
    <span class="key">border-collapse</span>: <span class="value">collapse</span>;
    <span class="key">border</span>: <span class="float">1px</span> <span class="color">#b8b8b8</span> <span class="value">solid</span>;
    <span class="key">margin</span>: <span class="value">auto</span>;
}
<span class="class">.issue_list</span> <span class="class">.desc</span>{
    <span class="key">min-width</span>: <span class="float">500px</span>;
}
<span class="class">.issue_list</span> <span class="tag">td</span>, <span class="class">.issue_list</span> <span class="tag">th</span>{
    <span class="key">border-bottom</span>: <span class="float">1px</span> <span class="color">#b8b8b8</span> <span class="value">solid</span>;
    <span class="key">border-top</span>: <span class="float">1px</span> <span class="color">#b8b8b8</span> <span class="value">solid</span>;
    <span class="key">padding</span>: <span class="float">5px</span>;
}
<span class="class">.issue_list</span> <span class="tag">tr</span>{
    <span class="key">height</span>: <span class="float">35px</span>;
    <span class="key">transition</span>: <span class="value">background</span> <span class="float">.25s</span>;

}
<span class="class">.issue_list</span> <span class="tag">tr</span><span class="pseudo-class">:hover</span>{
    <span class="key">background</span>: <span class="color">#eee</span>;
}
<span class="class">.issue_list</span> <span class="class">.status</span><span class="class">.done</span><span class="pseudo-class">:after</span>{
    <span class="key">content</span>: <span class="string"><span class="delimiter">'</span><span class="content"></span><span class="delimiter">'</span></span>;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="validate-4"><a class="link" href="#validate-4">6.8. Validate</a></h3>
<div class="paragraph">
<p>Reload the page on the <code><a href="http://localhost:8080/issuereport" class="bare">http://localhost:8080/issuereport</a></code>.
The styling should have been applied.
Enter some values in the fields and press submit.
Now the <code>result_message</code> <code>&lt;div&gt;</code> will also be shown.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/xspring_boot_project_submission_modal.png.pagespeed.ic.Sc0Y8hTuvl.png" alt="Spring Boot Project Submission Modal" data-pagespeed-url-hash="621482961" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
</div>
</div>
<div class="paragraph">
<p>The route <code>/issues</code> will show an empty list. This is because we have nothing added there yet.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-embedding-a-database"><a class="link" href="#exercise-embedding-a-database">7. Exercise - Embedding a database</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this exercise you will learn how to use a database to store the users issues and query them to show them on the list view.</p>
</div>
<div class="sect2">
<h3 id="setup-2"><a class="link" href="#setup-2">7.1. Setup</a></h3>
<div class="paragraph">
<p>We will use the <code>h2</code> database for this. You already added this to your project in <a href="#web_apps">Exercise - Configuring Spring Boot for web based applications</a>.
Spring Boot automatically picks up and configures <code>h2</code> when it&#8217;s on the classpath.</p>
</div>
<div class="paragraph">
<p>Now we only need to write a repository to interface with the db.</p>
</div>
<div class="paragraph">
<p>Create a new package called <code>com.vogella.example.repositories</code>.
In here create a new <code>interface</code> with the name <code>IssueRepository</code>.
This <code>interface</code> should extend the <code>interface</code> 'JpaRepository&lt;&gt;' from the package <code>org.springframework.data.jpa.repository</code>.
Pass in <code>IssueReport</code> as the first parameter and <code>Long</code> as the second.
This represents the object you are storing and the id it has inside the database.</p>
</div>
<div class="paragraph">
<p>Your <code>interface</code> should now look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.vogella.example.repository</span>;

<span class="keyword">import</span> <span class="include">org.springframework.data.jpa.repository.JpaRepository</span>;

<span class="keyword">import</span> <span class="include">com.vogella.example.entity.IssueReport</span>;

<span class="directive">public</span> <span class="type">interface</span> <span class="class">IssueRepository</span> <span class="directive">extends</span> JpaRepository&lt;IssueReport, <span class="predefined-type">Long</span>&gt;{
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This alone would already be enough to fetch all the entries from the database, add new entries and do all basic CRUD operations.</p>
</div>
<div class="paragraph">
<p>But we want to fetch all entries which are not marked private and show them on the public list view.
This is done by adding a custom query string to a method.
Add this method to your <code>interface</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.vogella.example.repository</span>;

<span class="keyword">import</span> <span class="include">java.util.List</span>;

<span class="keyword">import</span> <span class="include">org.springframework.data.jpa.repository.Query</span>;
<span class="keyword">import</span> <span class="include">org.springframework.data.jpa.repository.JpaRepository</span>;

<span class="keyword">import</span> <span class="include">com.vogella.example.entity.IssueReport</span>;

<span class="directive">public</span> <span class="type">interface</span> <span class="class">IssueRepository</span> <span class="directive">extends</span> JpaRepository&lt;IssueReport, <span class="predefined-type">Long</span>&gt; {
    <span class="annotation">@Query</span>(value = <span class="string"><span class="delimiter">&quot;</span><span class="content">SELECT i FROM IssueReport i WHERE markedAsPrivate = false</span><span class="delimiter">&quot;</span></span>)
    <span class="predefined-type">List</span>&lt;IssueReport&gt; findAllButPrivate();</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The annotation <code>@Query</code> lets us add custom JPQL queries that are executed upon calling the method.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We also want to get all IssueReport reported by the same email-address.
This is also done with a custom method.
But for this we don&#8217;t need a custom <code>@Query</code>.
It&#8217;s enough to create a method named <code>findAllByXXX</code>. <code>XXX</code> is a placeholder for the column you want to select by from the database.
The value for this is passed in as a method parameter.</p>
</div>
<div class="paragraph">
<p>Add the following to your <code>interface</code> as well:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.vogella.example.repository</span>;

<span class="keyword">import</span> <span class="include">java.util.List</span>;

<span class="keyword">import</span> <span class="include">org.springframework.data.jpa.repository.Query</span>;
<span class="keyword">import</span> <span class="include">org.springframework.data.jpa.repository.JpaRepository</span>;

<span class="keyword">import</span> <span class="include">com.vogella.example.entity.IssueReport</span>;

<span class="directive">public</span> <span class="type">interface</span> <span class="class">IssueRepository</span> <span class="directive">extends</span> JpaRepository&lt;IssueReport, <span class="predefined-type">Long</span>&gt; {
    <span class="annotation">@Query</span>(value = <span class="string"><span class="delimiter">&quot;</span><span class="content">SELECT i FROM IssueReport i WHERE markedAsPrivate = false</span><span class="delimiter">&quot;</span></span>)
    <span class="predefined-type">List</span>&lt;IssueReport&gt; findAllButPrivate();

    <span class="predefined-type">List</span>&lt;IssueReport&gt; findAllByEmail(<span class="predefined-type">String</span> email);
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="using-the-repository"><a class="link" href="#using-the-repository">7.2. Using the repository</a></h3>
<div class="paragraph">
<p>Go back to your controller class <code>IssueController.java</code> and add a new field of the repository interface to the class.
Since the <code>@Controller</code> is managed by Spring the <code>IssueRepository</code> will automatically be injected into the constructor.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.vogella.example.controller</span>;

<span class="keyword">import</span> <span class="include">org.springframework.beans.factory.annotation.Autowired</span>;
<span class="keyword">import</span> <span class="include">org.springframework.stereotype.Controller</span>;
<span class="keyword">import</span> <span class="include">org.springframework.ui.Model</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.GetMapping</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.ModelAttribute</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.PostMapping</span>;

<span class="keyword">import</span> <span class="include">com.vogella.example.entity.IssueReport</span>;
<span class="keyword">import</span> <span class="include">com.vogella.example.repository.IssueRepository</span>;

<span class="annotation">@Controller</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">IssueController</span> {
    IssueRepository issueRepository;

    <span class="directive">public</span> IssueController(IssueRepository issueRespository) {
        <span class="local-variable">this</span>.issueRepository = issueRepository;
    }

    <span class="annotation">@GetMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/issuereport</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> getReport(Model model) {
        model.addAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">issuereport</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> IssueReport());
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">issues/issuereport_form</span><span class="delimiter">&quot;</span></span>;
    }

    <span class="annotation">@PostMapping</span>(value=<span class="string"><span class="delimiter">&quot;</span><span class="content">/issuereport</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> submitReport(IssueReport issueReport, Model model) {
        model.addAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">submitted</span><span class="delimiter">&quot;</span></span>, <span class="predefined-constant">true</span>);
        model.addAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">issuereport</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> IssueReport());
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">issues/issuereport_form</span><span class="delimiter">&quot;</span></span>;
    }

    <span class="annotation">@GetMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/issues</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> getIssueReport(Model model) {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">issues/issuereport_list</span><span class="delimiter">&quot;</span></span>;
    }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="saving-records-to-the-database"><a class="link" href="#saving-records-to-the-database">7.2.1. Saving records to the database</a></h4>
<div class="paragraph">
<p>To save a record to the database simply use the method <code>save()</code> from the <code>IssueRepository</code> interface and pass the object you want to store.
In this case this is the received data on the path <code>/issuereport</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.vogella.example.controller</span>;

<span class="keyword">import</span> <span class="include">org.springframework.beans.factory.annotation.Autowired</span>;
<span class="keyword">import</span> <span class="include">org.springframework.stereotype.Controller</span>;
<span class="keyword">import</span> <span class="include">org.springframework.ui.Model</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.GetMapping</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.ModelAttribute</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.PostMapping</span>;

<span class="keyword">import</span> <span class="include">com.vogella.example.entity.IssueReport</span>;
<span class="keyword">import</span> <span class="include">com.vogella.example.repository.IssueRepository</span>;

<span class="annotation">@Controller</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">IssueController</span> {
    IssueRepository issueRepository;

    <span class="directive">public</span> IssueController(IssueRepository issueRespository) {
        <span class="local-variable">this</span>.issueRepository = issueRepository;
    }

    <span class="annotation">@GetMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/issuereport</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> getReport(Model model) {
        model.addAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">issuereport</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> IssueReport());
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">issues/issuereport_form</span><span class="delimiter">&quot;</span></span>;
    }

    <span class="annotation">@PostMapping</span>(value=<span class="string"><span class="delimiter">&quot;</span><span class="content">/issuereport</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> submitReport(IssueReport issueReport, Model model) {
        IssueReport result = <span class="local-variable">this</span>.issueRepository.save(issueReport);
        model.addAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">submitted</span><span class="delimiter">&quot;</span></span>, <span class="predefined-constant">true</span>);
        model.addAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">issuereport</span><span class="delimiter">&quot;</span></span>, result);
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">issues/issuereport_form</span><span class="delimiter">&quot;</span></span>;
    }

    <span class="annotation">@GetMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/issues</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> getIssueReport(Model model) {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">issues/issuereport_list</span><span class="delimiter">&quot;</span></span>;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This saves the given object to the database and then returns the freshly saved object.
You should always continue with the entity returned by the repository, because it contains the id set by the database and might have changed in other ways too.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="redirecting-after-post"><a class="link" href="#redirecting-after-post">7.3. Redirecting after POST</a></h3>
<div class="paragraph">
<p>If you  post a IssueReport to the server and then refresh the page (F5) you&#8217;ll notice that the browser wants the send the posted information again.
This could make users accidentally post an issue multiple times.
For this eason we&#8217;ll redirect them in our controller method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    <span class="annotation">@PostMapping</span>(value=<span class="string"><span class="delimiter">&quot;</span><span class="content">/issuereport</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> submitReport(IssueReport issueReport, RedirectAttributes ra) {
        <span class="local-variable">this</span>.issueRepository.save(issueReport);
        ra.addAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">submitted</span><span class="delimiter">&quot;</span></span>, <span class="predefined-constant">true</span>);
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">redirect:/issuereport</span><span class="delimiter">&quot;</span></span>;
    }</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="fetching-all-records-from-the-database"><a class="link" href="#fetching-all-records-from-the-database">7.3.1. Fetching all records from the database</a></h4>
<div class="paragraph">
<p>Normally this would be done using <code>findAll()</code>.
But in this case we don&#8217;t want to include records that are marked as private and for this we created the method <code>findAllButPrivate()</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.vogella.example.controller</span>;

<span class="keyword">import</span> <span class="include">org.springframework.beans.factory.annotation.Autowired</span>;
<span class="keyword">import</span> <span class="include">org.springframework.stereotype.Controller</span>;
<span class="keyword">import</span> <span class="include">org.springframework.ui.Model</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.GetMapping</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.ModelAttribute</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.PostMapping</span>;

<span class="keyword">import</span> <span class="include">com.vogella.example.entity.IssueReport</span>;
<span class="keyword">import</span> <span class="include">com.vogella.example.repository.IssueRepository</span>;

<span class="annotation">@Controller</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">IssueController</span> {
    IssueRepository issueRepository;

    <span class="directive">public</span> IssueController(IssueRepository issueRespository) {
        <span class="local-variable">this</span>.issueRepository = issueRepository;
    }

    <span class="annotation">@GetMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/issuereport</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> getReport(Model model, <span class="annotation">@RequestParam</span>(name = <span class="string"><span class="delimiter">&quot;</span><span class="content">submitted</span><span class="delimiter">&quot;</span></span>, required = <span class="predefined-constant">false</span>) <span class="type">boolean</span> submitted) {
        model.addAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">submitted</span><span class="delimiter">&quot;</span></span>, submitted);
        model.addAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">issuereport</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> IssueReport());
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">issues/issuereport_form</span><span class="delimiter">&quot;</span></span>;
    }

    <span class="annotation">@PostMapping</span>(value=<span class="string"><span class="delimiter">&quot;</span><span class="content">/issuereport</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> submitReport(IssueReport issueReport, RedirectAttributes ra) {
        <span class="local-variable">this</span>.issueRepository.save(issueReport);
        ra.addAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">submitted</span><span class="delimiter">&quot;</span></span>, <span class="predefined-constant">true</span>);
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">redirect:/issuereport</span><span class="delimiter">&quot;</span></span>;
    }

    <span class="annotation">@GetMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/issues</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> getIssueReport(Model model) {
        model.addAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">issues</span><span class="delimiter">&quot;</span></span>, <span class="local-variable">this</span>.issueRepository.findAllButPrivate());
       <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">issues/issuereport_list</span><span class="delimiter">&quot;</span></span>;
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="validate-5"><a class="link" href="#validate-5">7.4. Validate</a></h3>
<div class="paragraph">
<p>Your <code>IssueController</code> should now look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.vogella.example.controller</span>;

<span class="keyword">import</span> <span class="include">org.springframework.stereotype.Controller</span>;
<span class="keyword">import</span> <span class="include">org.springframework.ui.Model</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.GetMapping</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.PostMapping</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.RequestParam</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.servlet.mvc.support.RedirectAttributes</span>;

<span class="keyword">import</span> <span class="include">com.vogella.example.entity.IssueReport</span>;
<span class="keyword">import</span> <span class="include">com.vogella.example.repositories.IssueRepository</span>;

<span class="annotation">@Controller</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">IssueController</span> {
    IssueRepository issueRepository;

    <span class="directive">public</span> IssueController(IssueRepository issueRepository) {
        <span class="local-variable">this</span>.issueRepository = issueRepository;
    }

    <span class="annotation">@GetMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/issuereport</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> getReport(Model model, <span class="annotation">@RequestParam</span>(name = <span class="string"><span class="delimiter">&quot;</span><span class="content">submitted</span><span class="delimiter">&quot;</span></span>, required = <span class="predefined-constant">false</span>) <span class="type">boolean</span> submitted) {
        model.addAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">submitted</span><span class="delimiter">&quot;</span></span>, submitted);
        model.addAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">issuereport</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> IssueReport());
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">issues/issuereport_form</span><span class="delimiter">&quot;</span></span>;
    }

    <span class="annotation">@PostMapping</span>(value=<span class="string"><span class="delimiter">&quot;</span><span class="content">/issuereport</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> submitReport(IssueReport issueReport, RedirectAttributes ra) {
        <span class="local-variable">this</span>.issueRepository.save(issueReport);
        ra.addAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">submitted</span><span class="delimiter">&quot;</span></span>, <span class="predefined-constant">true</span>);
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">redirect:/issuereport</span><span class="delimiter">&quot;</span></span>;
    }

    <span class="annotation">@GetMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/issues</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> getIssues(Model model) {
        model.addAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">issues</span><span class="delimiter">&quot;</span></span>, <span class="local-variable">this</span>.issueRepository.findAllButPrivate());
       <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">issues/issuereport_list</span><span class="delimiter">&quot;</span></span>;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>IssueRepository</code> should look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.vogella.example.repositories</span>;

<span class="keyword">import</span> <span class="include">java.util.List</span>;

<span class="keyword">import</span> <span class="include">org.springframework.data.jpa.repository.Query</span>;
<span class="keyword">import</span> <span class="include">org.springframework.data.jpa.repository.JpaRepository</span>;

<span class="keyword">import</span> <span class="include">com.vogella.example.entity.IssueReport</span>;

<span class="directive">public</span> <span class="type">interface</span> <span class="class">IssueRepository</span> <span class="directive">extends</span> JpaRepository&lt;IssueReport, <span class="predefined-type">Long</span>&gt; {
    <span class="annotation">@Query</span>(value = <span class="string"><span class="delimiter">&quot;</span><span class="content">SELECT i FROM IssueReport i WHERE markedAsPrivate = false</span><span class="delimiter">&quot;</span></span>)
    <span class="predefined-type">List</span>&lt;IssueReport&gt; findAllButPrivate();

    <span class="predefined-type">List</span>&lt;IssueReport&gt; findAllByEmail(<span class="predefined-type">String</span> email);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Go ahead and reload the form and enter some data.
Now click <code>submit</code> and go to the route <a href="http://localhost:8080/issues"><code>/issues</code></a>. You should see the previously entered data.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-making-the-information-available-via-rest"><a class="link" href="#exercise-making-the-information-available-via-rest">8. Exercise - Making the information available via REST</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you want to access your data from another application or make it available for the public your best and most secure way is a REST api.
Luckily the SpringBoot framework has useful methods for this.</p>
</div>
<div class="sect2">
<h3 id="setup-3"><a class="link" href="#setup-3">8.1. Setup</a></h3>
<div class="paragraph">
<p>Create a new class named <code>IssueRestController</code>.
You may create a new package for this or use the existing <code>com.vogella.example.controller</code> package.
To tell Spring that this is a RestController and that the methods inside this controller should return JSON data, add the <code>@RestController</code> annotation to the class.</p>
</div>
<div class="paragraph">
<p>The setup for the routes is similar to normal routes.
Use the <code>@GetMapping</code> for <code>GET</code> requests. And <code>@PostMapping</code> for <code>POST</code> requests.
The difference is that this time you don&#8217;t want templates to be rendered.
So the return type for the methods should be whatever you want to return. E.g. <code>IssueReport</code> or even <code>List&lt;IssueReport&gt;</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.vogella.example.controller</span>;

<span class="keyword">import</span> <span class="include">java.util.List</span>;

<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.GetMapping</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.PathVariable</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.RestController</span>;

<span class="keyword">import</span> <span class="include">com.vogella.issuereport.IssueReport</span>;

<span class="annotation">@RestController</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">IssueRestController</span> {
    <span class="annotation">@GetMapping</span>(value=<span class="string"><span class="delimiter">&quot;</span><span class="content">/api/issues</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;IssueReport&gt; getIssues() {
        <span class="keyword">return</span> <span class="predefined-constant">null</span>;
    }

    <span class="annotation">@GetMapping</span>(value=<span class="string"><span class="delimiter">&quot;</span><span class="content">/api/issues/{id}</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> IssueReport getIssue(<span class="annotation">@PathVariable</span>(value=<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>) <span class="type">long</span> id) {
        <span class="keyword">return</span> <span class="predefined-constant">null</span>;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to access a variable in the URL (in this case <code>id</code>) you do this by first declaring it a variable in the <code>@GetMapping</code> arguments (<code>{id}</code>).
Than you require it as a method parameter with the <code>@PathVariable</code> annotation.</p>
</div>
</div>
<div class="sect2">
<h3 id="making-the-data-available"><a class="link" href="#making-the-data-available">8.2. Making the data available</a></h3>
<div class="paragraph">
<p>Accessing the data is pretty easy too.
Just (re-)use the previously created <code>IssueRepository</code> and return the values from the methods in there.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.vogella.example.controller</span>;

<span class="keyword">import</span> <span class="include">java.util.List</span>;

<span class="keyword">import</span> <span class="include">org.springframework.beans.factory.annotation.Autowired</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.GetMapping</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.PathVariable</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.RestController</span>;

<span class="keyword">import</span> <span class="include">com.vogella.issuereport.IssueReport</span>;
<span class="keyword">import</span> <span class="include">com.vogella.issuereport.repositories.IssueRepository</span>;

<span class="annotation">@RestController</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">IssueRestController</span> {
    IssueRepository issueRepository;

    <span class="directive">public</span> IssueRestController(IssueRespository issueRespositoy) {
        <span class="local-variable">this</span>.issueRepository = issueRespository;
    }

    <span class="annotation">@GetMapping</span>(value=<span class="string"><span class="delimiter">&quot;</span><span class="content">/api/issues</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;IssueReport&gt; getIssues() {
        <span class="keyword">return</span> <span class="local-variable">this</span>.issueRepository.findAllButPrivate();
    }

    <span class="annotation">@GetMapping</span>(value=<span class="string"><span class="delimiter">&quot;</span><span class="content">/api/issues/{id}</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> IssueReport getIssue(<span class="annotation">@PathVariable</span>(value=<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>) <span class="type">long</span> id) {
        <span class="keyword">return</span> <span class="local-variable">this</span>.issueRepository.findOne(id);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Again the <code>IssueRepository</code> is automatically injected into the class.
You can still use the custom query method <code>findAllButPrivate()</code>.</p>
</div>
<div class="paragraph">
<p>The method <code>findOne(long id)</code> queries only the object with the given Id.
In this case we get it from the URL parameters and then we return the object queried or (in case nothing is found) nothing.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="testing-spring-boot-applications"><a class="link" href="#testing-spring-boot-applications">9. Testing Spring Boot Applications</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>As long as you use constructor or setter injection you can write unit tests without any dependency on Spring.
Either create the dependencies of the class under test with the <code>new</code> keyword or mock them.</p>
</div>
<div class="paragraph">
<p>If you need to write integration tests you need Spring support to load a Spring ApplicationContext for your test.</p>
</div>
<div class="paragraph">
<p>To add testing support to your Spring Boot application you can require <code>spring-boot-starter-test</code> in your build configuration.
Besides testing support for Spring boot <code>spring-boot-starter-test</code> adds a handful of other useful libraries for your tests like JUnit, Mockito and AssertJ.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="rolling-back-database-changes-after-tests"><a class="link" href="#rolling-back-database-changes-after-tests">10. Rolling back database changes after tests</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you want Spring to roll back your database changes after a test finishes you can add <code>@Transactional</code> to your test class.
If you run a @SpringBootTest with either <code>RANDOM_PORT</code> or <code>DEFINED_PORT</code> your test will get executed in a different thread than the server.
This means that every transaction initiated on the server won&#8217;t be rolled back.
Using <code>@Transactional</code> on a test class can hide errors because changes don&#8217;t get actually flushed to the database.
Another option is to manually reset/reload the database state after every test.
This approach works but makes your tests hard to parallelize.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="test-annotations"><a class="link" href="#test-annotations">11. Test annotations</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Boot provides several test annotations that allow you to decide which parts of the application should get loaded.
To keep test startup times minimal you should only load what your test actually needs.
For these annotations to work you have to add the <code>@RunWith(SpringRunner.class)</code> annotation to your test class.
You can find an overview of all the auto-configurations that get loaded by a particular annotation in the <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/test-auto-configuration.html">Spring Boot manual</a>.</p>
</div>
<div class="sect2">
<h3 id="springboottest"><a class="link" href="#springboottest">11.1. @SpringBootTest</a></h3>
<div class="paragraph">
<p>The <code>@SpringBootTest</code> annotation searches upwards from the test package until it finds a <code>@SpringBootApplication</code> or <code>@SpringBootConfiguration</code>.
The Spring team advises to place the Application class into the root package, which should ensure that your main configuration is found by your test.
This means that your test will start with all Spring managed classes loaded.
You can set the <code>webEnvironment</code> attribute if you want to change which ApplicationContext is created:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>MOCK (default): loads a <code>WebApplicationContext</code> but mocks the servlet environment</p>
</li>
<li>
<p>RANDOM_PORT: loads an <code>EmbeddedWebApplicationContext</code> with servlet containers in their own thread, listening on a random port</p>
</li>
<li>
<p>DEFINED_PORT: loads an <code>EmbeddedWebApplicationContext</code> with servlet containers in their own thread, listening on their configured port</p>
</li>
<li>
<p>NONE: loads an <code>ApplicationContext</code> with no servlet environment</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To make calls to the server started by your test you can let Spring inject a <code>TestRestTemplate</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@RunWith</span>(SpringRunner.class)
<span class="annotation">@SpringBootTest</span>(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SpringIntegrationTest</span> {

    <span class="annotation">@Autowired</span>
    <span class="directive">private</span> TestRestTemplate restTemplate;
    <span class="comment">// ...</span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="webmvctest"><a class="link" href="#webmvctest">11.2. @WebMvcTest</a></h3>
<div class="paragraph">
<p>WebMvcTests are used to test controller behavior without the overhead of starting a web server.
In conjunction with mocks it is possible to test that routes are configured correctly without the overhead of executing the operations associated with the endpoints.
A WebMvcTest configures a MockMvc instance that can be used to simulate network calls.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">static</span> <span class="include">org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.springframework.test.web.servlet.result.MockMvcResultMatchers.status</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.springframework.test.web.servlet.result.MockMvcResultMatchers.view</span>;

<span class="annotation">@RunWith</span>(SpringRunner.class)
<span class="annotation">@WebMvcTest</span>(UserController.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">UserLoginIntegrationTest</span> {
    <span class="annotation">@Autowired</span>
    <span class="directive">private</span> MockMvc mvc;
    <span class="annotation">@MockBean</span>
    <span class="directive">private</span> UserService userService;

    <span class="annotation">@Test</span>
    <span class="directive">public</span> <span class="type">void</span> loginTest() <span class="directive">throws</span> <span class="exception">Exception</span> {
        mvc.perform(get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/login</span><span class="delimiter">&quot;</span></span>))
            .andExpect(status().isOk())
            .andExpect(view().name(<span class="string"><span class="delimiter">&quot;</span><span class="content">user/login</span><span class="delimiter">&quot;</span></span>));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want Spring to load additional classes you can specify an include filter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@WebMvcTest</span>(value = UserController.class, includeFilters = { <span class="annotation">@ComponentScan</span>.Filter(type = FilterType.ASSIGNABLE_TYPE, classes = UserService.class) })</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="datajpatest"><a class="link" href="#datajpatest">11.3. @DataJpaTest</a></h3>
<div class="paragraph">
<p>DataJpaTests load <code>@Entity</code> and <code>@Repository</code> but not regular <code>@Component</code> classes.
This makes it possible to test your JPA integration with minimal overhead.
You can inject a TestEntityManager into your test, which is an EntityManager specifically designed for tests.
If you want to have your JPA repositories configured in other tests you can use the <code>@AutoConfigureDataJpa</code> annotation.
To use a different database connection than the one specified in your configuration you can use <code>@AutoConfigureTestDatabase</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@RunWith</span>(SpringRunner.class)
<span class="annotation">@DataJpaTest</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">JpaDataIntegrationTest</span> {

    <span class="annotation">@Autowired</span>
    <span class="directive">private</span> UserRepository userRepository;

    <span class="comment">// ...</span>
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mocking"><a class="link" href="#mocking">12. Mocking</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Boot provides the <code>@MockBean</code> annotation that automatically creates a mock object.
When this annotation is placed on a field this mock object is automatically injected into any class managed by Spring that requires it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@RunWith</span>(SpringRunner.class)
<span class="annotation">@WebMvcTest</span>(UserController.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">UserTest</span> {

    <span class="annotation">@MockBean</span>
    <span class="directive">private</span> UserService userService;
    <span class="annotation">@Autowired</span>
    <span class="directive">private</span> MockMvc mvc;

    <span class="annotation">@Test</span>
    <span class="directive">public</span> <span class="type">void</span> loginTest() <span class="directive">throws</span> <span class="exception">Exception</span> {
        when(userService.login(anyObject())).thenReturn(<span class="predefined-constant">true</span>);
        mvc.perform(get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/login</span><span class="delimiter">&quot;</span></span>))
            .andExpect(status().isOk())
            .andExpect(view().name(<span class="string"><span class="delimiter">&quot;</span><span class="content">user/login</span><span class="delimiter">&quot;</span></span>));
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mockmvc"><a class="link" href="#mockmvc">13. MockMvc</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>MockMvc</code> is a powerful tool that allows you to test controllers without starting an actual web server.
In an <code>@WebMvcTest</code> MockMvc gets auto configured and can be injected into the test class with <code>@Autowired</code>.
To auto configure MockMvc in a different test you can use the <code>@AutoConfigureMockMvc</code> annotation.
Alternatively you can create it yourself:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Autowired</span>
<span class="directive">private</span> WebApplicationContext webApplicationContext;
<span class="directive">private</span> MockMvc mvc;

<span class="annotation">@Before</span>
<span class="directive">public</span> <span class="type">void</span> setUp() <span class="directive">throws</span> <span class="exception">Exception</span> {
    mvc = MockMvcBuilders.webAppContextSetup(webApplicationContext).build();
}</code></pre>
</div>
</div>
<!-- Responsive Lake Quincy Ads -->
<div id='ad-inBetween02'>
	<script type='text/javascript'>googletag.cmd.push(function(){googletag.display('ad-inBetween02');});</script>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spring-boot-2-0"><a class="link" href="#spring-boot-2-0">14. Spring Boot 2.0</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The second major release of Spring Boot is based on new features coming with Version 5 of the Spring Framework.
Since reactive functional programming has proven to be a great concept for asynchronous processing of code this is one of the main new features coming with Spring Boot 2.0</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-create-a-reactive-spring-boot-project"><a class="link" href="#exercise-create-a-reactive-spring-boot-project">15. Exercise: Create a reactive Spring Boot project</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the Spring Tool Suite just right click in the <em>Package Explorer</em> and go to <span class="menuseq"><span class="menu">New</span>&#160;&#9656; <span class="menuitem">Spring Starter Project</span></span></p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/xcreate-spring-starter-project.png.pagespeed.ic.dfcyGxzOGo.png" alt="create spring starter project" data-pagespeed-url-hash="2852962948" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
</div>
</div>
<div class="paragraph">
<p>Use the following settings in the project creation dialog:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/xspring-starter-project-wizard.png.pagespeed.ic.t59Ei3YllV.png" alt="spring starter project wizard" data-pagespeed-url-hash="1280937413" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
</div>
</div>
<div class="paragraph">
<p>When pressing <b class="button">Next</b> the desired dependencies can be specified.</p>
</div>
<div class="paragraph">
<p>First select Spring Boot Version <strong>2.0.0</strong> and the following dependencies:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Lombok</p>
</li>
<li>
<p>MongoDB</p>
</li>
<li>
<p>Reactive MongoDB</p>
</li>
<li>
<p>Embedded MongoDB</p>
</li>
<li>
<p>Actuator</p>
</li>
<li>
<p>Reactive Web</p>
</li>
<li>
<p>Rest Docs</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="img/xspring-starter-dependencies.png.pagespeed.ic.T9D-BEV3eR.png" alt="spring starter dependencies" data-pagespeed-url-hash="2782229847" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
</div>
</div>
<div class="paragraph">
<p>Then press <b class="button">Finish</b> so that the project will be generated.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-create-a-todo-domain-model"><a class="link" href="#exercise-create-a-todo-domain-model">16. Exercise: Create a Todo domain model</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Create another package called <em>com.vogella.springboot2.domain</em> and create a <em>Todo</em> class inside it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.vogella.springboot2.domain</span>;

<span class="keyword">import</span> <span class="include">java.util.Date</span>;

<span class="keyword">import</span> <span class="include">com.fasterxml.jackson.annotation.JsonIgnoreProperties</span>;

<span class="keyword">import</span> <span class="include">lombok.Data</span>;
<span class="keyword">import</span> <span class="include">lombok.NoArgsConstructor</span>;

<span class="annotation">@Data</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="annotation">@NoArgsConstructor</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="annotation">@JsonIgnoreProperties</span>(ignoreUnknown = <span class="predefined-constant">true</span>) <i class="conum" data-value="3"></i><b>(3)</b>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Todo</span> {

    <span class="directive">private</span> <span class="type">long</span> id;
    <span class="directive">private</span> <span class="predefined-type">String</span> summary = <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>;
    <span class="directive">private</span> <span class="predefined-type">String</span> description = <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>;
    <span class="directive">private</span> <span class="type">boolean</span> done = <span class="predefined-constant">false</span>;
    <span class="directive">private</span> <span class="predefined-type">Date</span> dueDate = <span class="keyword">new</span> <span class="predefined-type">Date</span>();

    <span class="directive">public</span> Todo(<span class="type">long</span> id) {
        <span class="local-variable">this</span>.id = id;
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <em>Todo</em> class is a simple data class and the <em>@Data</em> annotation of the Lombok library automatically generates getters and setters for the properties and <em>hashCode()</em>, <em>equals()</em> and <em>toString()</em> methods.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>If a certain constructor is implemented and a constructor with no arguments should still be available the <em>@NoArgsConstructor</em> annotation can be used.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The Todo is also supposed to be serialized and deserialized with JSON, Spring uses the Jackson library for this by default. @JsonIgnoreProperties(ignoreUnknown = true) specifies that properties, which are available in the JSON String, but not specified as class members will be ignored instead of raising an Exception.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-creating-a-reactive-rest-controller"><a class="link" href="#exercise-creating-a-reactive-rest-controller">17. Exercise: Creating a reactive rest controller</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Create a package private <em>TodoRestController</em> class inside a <em>com.vogella.springboot2.controller</em> package.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.vogella.springboot2.controller</span>;

<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.GetMapping</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.RequestParam</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.RestController</span>;

<span class="keyword">import</span> <span class="include">com.vogella.springboot2.domain.Todo</span>;

<span class="keyword">import</span> <span class="include">reactor.core.publisher.Flux</span>;

<span class="annotation">@RestController</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="type">class</span> <span class="class">TodoRestController</span> {

    <span class="directive">private</span> Flux&lt;Todo&gt; todos; <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="directive">public</span> TodoRestController() {
        todos = createTodoModel();
    }

    <span class="directive">private</span> Flux&lt;Todo&gt; createTodoModel() {
        Todo todo = <span class="keyword">new</span> Todo(<span class="integer">1</span>);
        todo.setSummary(<span class="string"><span class="delimiter">&quot;</span><span class="content">Learn Spring Boot 2.0</span><span class="delimiter">&quot;</span></span>);
        todo.setDescription(<span class="string"><span class="delimiter">&quot;</span><span class="content">Easily create modern reactive webapps with Spring Boot 2.0</span><span class="delimiter">&quot;</span></span>);

        Todo todo2 = <span class="keyword">new</span> Todo(<span class="integer">2</span>);
        todo2.setSummary(<span class="string"><span class="delimiter">&quot;</span><span class="content">Learn Reactor Framework</span><span class="delimiter">&quot;</span></span>);
        todo2.setDescription(<span class="string"><span class="delimiter">&quot;</span><span class="content">Use the power of the reactive io api with the Reactor Framework</span><span class="delimiter">&quot;</span></span>);

        Todo todo3 = <span class="keyword">new</span> Todo(<span class="integer">3</span>);
        todo3.setSummary(<span class="string"><span class="delimiter">&quot;</span><span class="content">Learn @RestController</span><span class="delimiter">&quot;</span></span>);
        todo3.setDescription(<span class="string"><span class="delimiter">&quot;</span><span class="content">Learn how to create @RestController and use rest endpoints</span><span class="delimiter">&quot;</span></span>);

        <span class="keyword">return</span> Flux.just(todo, todo2, todo3);
    }

    <span class="annotation">@GetMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/getTodos</span><span class="delimiter">&quot;</span></span>) <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="directive">public</span> Flux&lt;Todo&gt; getTodos() {
        <span class="keyword">return</span> todos;
    }

}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The @RestController annotation tells Spring that this class is a rest controller, which will be instantiated by the Spring framework</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Flux is a type of the Reactor Framework, which implements the reactive stream api like RxJava does.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The @GetMapping annotation tells Spring that the endpoint <a href="http://{yourdomain}/getTodos" class="bare">http://{yourdomain}/getTodos</a> should invoke the <em>getTodos()</em> method.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now start the application by right clicking the project and clicking on <span class="menuseq"><span class="menu">Run as</span>&#160;&#9656; <span class="menuitem">Spring Boot App</span></span>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/xspring-start-console.png.pagespeed.ic.soa2BYHeQ5.png" alt="spring start console" data-pagespeed-url-hash="1674702254" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
</div>
</div>
<div class="paragraph">
<p>Along with many more logging statements the previously created rest endpoint <em>/getTodos</em> is mentioned.</p>
</div>
<div class="paragraph">
<p>Now let&#8217;s test the result when navigating to <a href="http://localhost:8080/getTodos" class="bare">http://localhost:8080/getTodos</a>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/xrestcontroller-json.png.pagespeed.ic.ktIvNLo26b.png" alt="restcontroller json" data-pagespeed-url-hash="3685792073" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
</div>
</div>
<div class="paragraph">
<p>What we can see here is that the result is shown as JSON. By default the <em>@RestController</em> annotation handles this and if no specific mime type for the response is requested the result will be the object serialized as JSON. By default Spring uses the Jackson library the serialize and deserialize Java objects from and to JSON.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="optional-change-the-default-port-of-the-web-app"><a class="link" href="#optional-change-the-default-port-of-the-web-app">18. Optional: Change the default port of the web app</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default Spring Boot uses port 8080, but this can be changed by using the <em>server.port</em> property in the <em>application.properties</em> file.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/xserver-port-app-props.png.pagespeed.ic.EPB5kt-NsX.png" alt="server port app props" data-pagespeed-url-hash="973096082" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
</div>
</div>
<div class="paragraph">
<p>Since this is an optional exercise, we should leave the port to be 8080.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">server.port=8080</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-passing-parameters-to-the-rest-api"><a class="link" href="#exercise-passing-parameters-to-the-rest-api">19. Exercise: Passing parameters to the rest api</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Since the amount of Todos can potentially increase really fast it would be nice to have search capabilities so that clients do not have to receive the whole list of Todos all the time and do the search on the client side.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@RestController</span>
<span class="type">class</span> <span class="class">TodoRestController</span> {

    <span class="comment">// ... more code</span>

    <span class="annotation">@GetMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/getTodos</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> Flux&lt;Todo&gt; getTodos(
    <span class="annotation">@RequestParam</span>(name = <span class="string"><span class="delimiter">&quot;</span><span class="content">limit</span><span class="delimiter">&quot;</span></span>, required = <span class="predefined-constant">false</span>, defaultValue = <span class="string"><span class="delimiter">&quot;</span><span class="content">-1</span><span class="delimiter">&quot;</span></span>) <span class="type">long</span> limit) { <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="keyword">if</span>(-<span class="integer">1</span> == limit) {
            <span class="keyword">return</span> todos;
        }
        <span class="keyword">return</span> todos.take(limit);
    }

    <span class="annotation">@GetMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/getTodoById</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> Mono&lt;Todo&gt; getTodoById(<span class="type">long</span> id) {  <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="keyword">return</span> Mono.from(todos.filter(t -&gt; id == t.getId()));
    }

}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>@RequestParam can be used to request parameters and also apply default values, if the parameter is not required.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>If the parameter is required a the name of the request parameter should be equal to method parameter&#8217;s name, the @RequestParam annotation can be omitted.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-posting-data-to-the-rest-controller"><a class="link" href="#exercise-posting-data-to-the-rest-controller">20. Exercise: Posting data to the rest controller</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is nice to receive data, but we also want to create new Todos.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@PostMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/newTodo</span><span class="delimiter">&quot;</span></span>) <i class="conum" data-value="1"></i><b>(1)</b>
<span class="directive">public</span> Mono&lt;Todo&gt; newTodo(<span class="annotation">@RequestBody</span> Todo todo) {
    Mono&lt;Todo&gt; todoMono = Mono.just(todo);
    todos = todos.mergeWith(todoMono); <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="keyword">return</span> todoMono;
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>@PostMapping</code> is used to specify that data has to be posted</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>mergeWith</code> method merges the existing Flux with the new <code>Mono&lt;Todo&gt;</code> containing the posted <code>Todo</code> object</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Curl or any rest client you like, e.g., <a href="https://addons.mozilla.org/de/firefox/addon/rester/">RESTer</a> for Firefox, can be used to post data to the rest endpoint.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="curl">curl -d '{&quot;id&quot;:4, &quot;summary&quot;:&quot;New custom Todo&quot;}' -H &quot;Content-Type: application/json&quot; -X POST http://localhost:8080/newTodo</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will return the "New custom Todo" and show it on the command line.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-sending-a-delete-request"><a class="link" href="#exercise-sending-a-delete-request">21. Exercise: Sending a delete request</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Last but not least Todos should also be deleted by using the rest API.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@DeleteMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/deleteTodo/{id}</span><span class="delimiter">&quot;</span></span>) <i class="conum" data-value="1"></i><b>(1)</b>
<span class="directive">public</span> Mono&lt;<span class="predefined-type">Void</span>&gt; deleteTodo(<span class="annotation">@PathVariable</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>) <span class="type">int</span> id) { <i class="conum" data-value="2"></i><b>(2)</b>
    todos = todos.filter(todo -&gt; todo.getId() != id);
    <span class="keyword">return</span> todos.then();
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>@DeleteMapping</code> can be used for delete rest operations and curly braces + name like <em>{id}</em> can be used as alternative of using query parameters like ?id=3</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>@PathVariable</code> specifies the path, which will be used for the {id} path variable</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Todo no. 3 can be deleted, since we learned how to create rest controllers now.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="curl">curl -X DELETE http://localhost:8080/deleteTodo/3</code></pre>
</div>
</div>
<div class="paragraph">
<p>After using this curl command the remaining Todos are returned without Todo no. 3.</p>
</div>
<div class="paragraph">
<p>Call the <a href="http://localhost:8080/getTodos" class="bare">http://localhost:8080/getTodos</a> method again to check whether the deletion was successful.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-creating-a-service-for-the-business-logic"><a class="link" href="#exercise-creating-a-service-for-the-business-logic">22. Exercise: Creating a service for the business logic</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Creating an initial model should not be part of the <code>TodoRestController</code> itself.
A rest controller should simply specify the rest API and then delegate to a service, which handles the business logic in behind.</p>
</div>
<div class="paragraph">
<p>Therefore a <code>TodoService</code> class should be created in the com.vogella.springboot2.service package.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.vogella.springboot2.service</span>;

<span class="keyword">import</span> <span class="include">org.springframework.stereotype.Service</span>;

<span class="keyword">import</span> <span class="include">com.vogella.springboot2.domain.Todo</span>;

<span class="keyword">import</span> <span class="include">reactor.core.publisher.Flux</span>;

<span class="annotation">@Service</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="directive">public</span> <span class="type">class</span> <span class="class">TodoService</span> {

    <span class="directive">private</span> Flux&lt;Todo&gt; todos;

    <span class="directive">public</span> TodoService() {
        todos = createTodoModel();
    }

    <span class="directive">private</span> Flux&lt;Todo&gt; createTodoModel() {
        Todo todo = <span class="keyword">new</span> Todo(<span class="integer">1</span>);
        todo.setSummary(<span class="string"><span class="delimiter">&quot;</span><span class="content">Learn Spring Boot 2.0</span><span class="delimiter">&quot;</span></span>);
        todo.setDescription(<span class="string"><span class="delimiter">&quot;</span><span class="content">Easily create modern reactive webapps with Spring Boot 2.0</span><span class="delimiter">&quot;</span></span>);

        Todo todo2 = <span class="keyword">new</span> Todo(<span class="integer">2</span>);
        todo2.setSummary(<span class="string"><span class="delimiter">&quot;</span><span class="content">Learn Reactor Framework</span><span class="delimiter">&quot;</span></span>);
        todo2.setDescription(<span class="string"><span class="delimiter">&quot;</span><span class="content">Use the power of the reactive io api with the Reactor Framework</span><span class="delimiter">&quot;</span></span>);

        Todo todo3 = <span class="keyword">new</span> Todo(<span class="integer">3</span>);
        todo3.setSummary(<span class="string"><span class="delimiter">&quot;</span><span class="content">Learn @RestController</span><span class="delimiter">&quot;</span></span>);
        todo3.setDescription(<span class="string"><span class="delimiter">&quot;</span><span class="content">Learn how to create @RestController and use rest endpoints</span><span class="delimiter">&quot;</span></span>);

        <span class="keyword">return</span> Flux.just(todo, todo2, todo3);
    }

    <span class="directive">public</span> Flux&lt;Todo&gt; getTodos(<span class="type">long</span> limit) {
        <span class="keyword">if</span> (-<span class="integer">1</span> == limit) {
            <span class="keyword">return</span> todos;
        }
        <span class="keyword">return</span> todos.take(limit);
    }

    <span class="directive">public</span> Mono&lt;Todo&gt; getTodoById(<span class="type">long</span> id) {
        <span class="keyword">return</span> Mono.from(todos.filter(t -&gt; id == t.getId()));
    }

    <span class="directive">public</span> Mono&lt;Todo&gt; newTodo(Todo todo) {
        Mono&lt;Todo&gt; todoMono = Mono.just(todo);
        todos = todos.mergeWith(todoMono);
        <span class="keyword">return</span> todoMono;
    }

    <span class="directive">public</span> Mono&lt;<span class="predefined-type">Void</span>&gt; deleteTodo(<span class="type">int</span> id) {
        todos = todos.filter(todo -&gt; todo.getId() != id);
        <span class="keyword">return</span> todos.then();
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The @Service annotation specifies this <code>TodoService</code> as spring service, which will be created when it is demanded by other classes like the refactored <code>TodoRestController</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Basically we just moved everything into another class, but left out the rest controller specific annotations.</p>
</div>
<div class="paragraph">
<p>Now the <code>TodoRestController</code> looks clearly arranged and just delegates the rest requests to the <code>TodoService</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.vogella.springboot2.controller</span>;

<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.DeleteMapping</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.GetMapping</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.PathVariable</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.PostMapping</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.RequestBody</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.RequestParam</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.bind.annotation.RestController</span>;

<span class="keyword">import</span> <span class="include">com.vogella.springboot2.domain.Todo</span>;
<span class="keyword">import</span> <span class="include">com.vogella.springboot2.service.TodoService</span>;

<span class="keyword">import</span> <span class="include">reactor.core.publisher.Flux</span>;
<span class="keyword">import</span> <span class="include">reactor.core.publisher.Mono</span>;

<span class="annotation">@RestController</span>
<span class="type">class</span> <span class="class">TodoRestController</span> {

    <span class="directive">private</span> TodoService todoService;

    <span class="directive">public</span> TodoRestController(TodoService todoService) { <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="local-variable">this</span>.todoService = todoService;
    }

    <span class="annotation">@GetMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/getTodos</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> Flux&lt;Todo&gt; getTodos(<span class="annotation">@RequestParam</span>(name = <span class="string"><span class="delimiter">&quot;</span><span class="content">limit</span><span class="delimiter">&quot;</span></span>, required = <span class="predefined-constant">false</span>, defaultValue = <span class="string"><span class="delimiter">&quot;</span><span class="content">-1</span><span class="delimiter">&quot;</span></span>) <span class="type">long</span> limit) {
        <span class="keyword">return</span> todoService.getTodos(limit);
    }

    <span class="annotation">@GetMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/getTodoById</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> Mono&lt;Todo&gt; getTodoById(<span class="type">long</span> id) {
        <span class="keyword">return</span> todoService.getTodoById(id);
    }

    <span class="annotation">@PostMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/newTodo</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> Mono&lt;Todo&gt; newTodo(<span class="annotation">@RequestBody</span> Todo todo) {
        <span class="keyword">return</span> todoService.newTodo(todo);
    }

    <span class="annotation">@DeleteMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/deleteTodo/{id}</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> Mono&lt;<span class="predefined-type">Void</span>&gt; deleteTodo(<span class="annotation">@PathVariable</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>) <span class="type">int</span> id) {
        <span class="keyword">return</span> todoService.deleteTodo(id);
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Since the Spring framework instantiates the <code>TodoRestController</code> it is able to find the <code>TodoService</code>, which is demanded in the <code>TodoRestControllers</code> constructor. This works, because the <code>TodoService</code> class has the <code>@Service</code> annotation being applied.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>TodoService</code> will do more stuff in the upcoming chapters.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-reactive-database-access-with-spring-data"><a class="link" href="#exercise-reactive-database-access-with-spring-data">23. Exercise: Reactive database access with Spring Data</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Using reactive Reactor types like <code>Flux&lt;T&gt;</code> is really nice and powerful, but keeping the Todo data in-memory is not.</p>
</div>
<div class="paragraph">
<p>In former chapters, where the project has been created MongoDB dependencies have already been selected.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>MongoDB has the benefit that it comes with a reactive database driver, which other databases like JDBC cannot offer. Hopefully in the future other databases catch up and provide reactive asynchronous database drivers as well.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>But don&#8217;t be scared, if you haven&#8217;t used MongoDB yet, because there is a <code>compile('org.springframework.boot:spring-boot-starter-data-mongodb-reactive')</code> dependency in your <em>build.gradle</em> file, which provides an abstraction layer around the database.</p>
</div>
<div class="paragraph">
<p>In order to find, save and delete <code>Todo</code> objects in the mongo db a <code>TodoRepository</code> in the <em>com.vogella.springboot2.data</em> package should be created.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.vogella.springboot2.data</span>;

<span class="keyword">import</span> <span class="include">org.springframework.data.repository.reactive.ReactiveCrudRepository</span>;

<span class="keyword">import</span> <span class="include">com.vogella.springboot2.domain.Todo</span>;

<span class="directive">public</span> <span class="type">interface</span> <span class="class">TodoRepository</span> <span class="directive">extends</span> ReactiveCrudRepository&lt;Todo, <span class="predefined-type">Long</span>&gt; {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now Spring can create a <code>ReactiveCrudRepository</code> for <code>Todo</code> objects at runtime automatically, which provides &#169;reate, &#174;ead, (U)pdate and (D)elete capabilties.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>ReactiveCrudRepository</code> class is similar to Spring Datas' <code>CrudRepository</code> class, but is able to return reactive asynchronous types rather than synchronous types.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now we have to enable MongoDB to work with <code>Todo</code> objects:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.vogella.springboot2.domain</span>;

<span class="keyword">import</span> <span class="include">java.util.Date</span>;

<span class="keyword">import</span> <span class="include">org.springframework.data.annotation.Id</span>;

<span class="keyword">import</span> <span class="include">com.fasterxml.jackson.annotation.JsonIgnoreProperties</span>;

<span class="keyword">import</span> <span class="include">lombok.Data</span>;
<span class="keyword">import</span> <span class="include">lombok.NoArgsConstructor</span>;

<span class="annotation">@Data</span>
<span class="annotation">@NoArgsConstructor</span>
<span class="annotation">@JsonIgnoreProperties</span>(ignoreUnknown = <span class="predefined-constant">true</span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">Todo</span> {

    <span class="annotation">@Id</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="directive">private</span> <span class="type">long</span> id;
    <span class="directive">private</span> <span class="predefined-type">String</span> summary = <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>;
    <span class="directive">private</span> <span class="predefined-type">String</span> description = <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>;
    <span class="directive">private</span> <span class="type">boolean</span> done = <span class="predefined-constant">false</span>;
    <span class="directive">private</span> <span class="predefined-type">Date</span> dueDate = <span class="keyword">new</span> <span class="predefined-type">Date</span>();

    <span class="directive">public</span> Todo(<span class="type">long</span> id) {
        <span class="local-variable">this</span>.id = id;
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>@Id is used to specify the id of the object, which is supposed to be stored in the database</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now the <code>TodoService</code> should be updated to store the data by using the <code>TodoRepository</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.vogella.springboot2.service</span>;

<span class="keyword">import</span> <span class="include">java.util.Arrays</span>;

<span class="keyword">import</span> <span class="include">org.springframework.stereotype.Service</span>;

<span class="keyword">import</span> <span class="include">com.vogella.springboot2.data.TodoRepository</span>;
<span class="keyword">import</span> <span class="include">com.vogella.springboot2.domain.Todo</span>;

<span class="keyword">import</span> <span class="include">reactor.core.publisher.Flux</span>;
<span class="keyword">import</span> <span class="include">reactor.core.publisher.Mono</span>;

<span class="annotation">@Service</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">TodoService</span> {

    <span class="directive">private</span> TodoRepository todoRepository;

    <span class="directive">public</span> TodoService(TodoRepository todoRepository) { <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="local-variable">this</span>.todoRepository = todoRepository;
        createTodoModel();
    }

    <span class="directive">private</span> <span class="type">void</span> createTodoModel() {
        Todo todo = <span class="keyword">new</span> Todo(<span class="integer">1</span>);
        todo.setSummary(<span class="string"><span class="delimiter">&quot;</span><span class="content">Learn Spring Boot 2.0</span><span class="delimiter">&quot;</span></span>);
        todo.setDescription(<span class="string"><span class="delimiter">&quot;</span><span class="content">Easily create modern reactive webapps with Spring Boot 2.0</span><span class="delimiter">&quot;</span></span>);

        Todo todo2 = <span class="keyword">new</span> Todo(<span class="integer">2</span>);
        todo2.setSummary(<span class="string"><span class="delimiter">&quot;</span><span class="content">Learn Reactor Framework</span><span class="delimiter">&quot;</span></span>);
        todo2.setDescription(<span class="string"><span class="delimiter">&quot;</span><span class="content">Use the power of the reactive io api with the Reactor Framework</span><span class="delimiter">&quot;</span></span>);

        Todo todo3 = <span class="keyword">new</span> Todo(<span class="integer">3</span>);
        todo3.setSummary(<span class="string"><span class="delimiter">&quot;</span><span class="content">Learn @RestController</span><span class="delimiter">&quot;</span></span>);
        todo3.setDescription(<span class="string"><span class="delimiter">&quot;</span><span class="content">Learn how to create @RestController and use rest endpoints</span><span class="delimiter">&quot;</span></span>);

        todoRepository.saveAll(<span class="predefined-type">Arrays</span>.asList(todo, todo2, todo3)).subscribe(); <i class="conum" data-value="2"></i><b>(2)</b>
    }

    <span class="directive">public</span> Flux&lt;Todo&gt; getTodos(<span class="type">long</span> limit) {
        <span class="keyword">if</span> (-<span class="integer">1</span> == limit) {
            <span class="keyword">return</span> todoRepository.findAll();
        }
        <span class="keyword">return</span> todoRepository.findAll().take(limit);
    }

    <span class="directive">public</span> Mono&lt;Todo&gt; getTodoById(<span class="type">long</span> id) {
        <span class="keyword">return</span> todoRepository.findById(id);
    }

    <span class="directive">public</span> Mono&lt;Todo&gt; newTodo(Todo todo) {
        <span class="keyword">return</span> todoRepository.save(todo);
    }

    <span class="directive">public</span> Mono&lt;<span class="predefined-type">Void</span>&gt; deleteTodo(<span class="type">long</span> id) {
        <span class="keyword">return</span> todoRepository.deleteById(id);
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Even tough the <code>TodoRepository</code> interface is not annotated with @Service, @Bean, @Component or something similar it is automatically injected. The Spring Framework creates an instance of the <code>TodoRepository</code> at runtime once it is requested by the <code>TodoService</code>, because the <code>TodoRepository</code> is derived from <code>ReactiveCrudRepository</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>For the initial model the 3 Todos from former chapters are now stored in the MongoDB.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For all other operations the <code>ReactiveCrudRepository</code> default methods, which return Reactor types, are used (<code>findAll</code>, <code>findById</code>, <code>save</code>, <code>deleteById</code>).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-implement-custom-query-methods"><a class="link" href="#exercise-implement-custom-query-methods">24. Exercise: Implement custom query methods</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Basically everything can be done by using CRUD operations. In case a <code>Todo</code> should be found by looking for text in the summary the <code>findAll()</code> method can be used and the service can iterate over the <code>Flux&lt;Todo&gt;</code> in order to find appropriate <code>Todo</code> objects.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> Flux&lt;Todo&gt; getBySummary(<span class="predefined-type">String</span> textInSummary) {
        Flux&lt;Todo&gt; findAll = todoRepository.findAll();
        Flux&lt;Todo&gt; filteredFlux = findAll.filter(todo -&gt; todo.getSummary().toLowerCase().contains(textInSummary.toLowerCase()));
        <span class="keyword">return</span> filteredFlux;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>But wait, is it really efficient to get all Todos and then filter them?</p>
</div>
<div class="paragraph">
<p>Modern databases can do this way more efficient by for example using the SQL <em>LIKE</em> statement. In general it is way better to delegate the query of certain elements to the database to gain more performance.</p>
</div>
<div class="paragraph">
<p>Spring data provides way more possibilities than just using the CRUD operations, which are derived from the <code>ReactiveCrudRepository</code> interface.</p>
</div>
<div class="paragraph">
<p>Inside the almost empty <code>TodoRepository</code> class custom method with a certain naming schema can be specified and Spring will take care of creating appropriate query out of them.</p>
</div>
<div class="paragraph">
<p>So rather than filtering the Todos from the database on ourselves it can be done like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.vogella.springboot2.data</span>;

<span class="keyword">import</span> <span class="include">org.springframework.data.repository.reactive.ReactiveCrudRepository</span>;

<span class="keyword">import</span> <span class="include">com.vogella.springboot2.domain.Todo</span>;

<span class="keyword">import</span> <span class="include">reactor.core.publisher.Flux</span>;

<span class="directive">public</span> <span class="type">interface</span> <span class="class">TodoRepository</span> <span class="directive">extends</span> ReactiveCrudRepository&lt;Todo, <span class="predefined-type">Long</span>&gt; {

    Flux&lt;Todo&gt; findBySummaryContainingIgnoreCase(<span class="predefined-type">String</span> summary);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We leave it up to the reader to make use of the <code>findBySummaryContainingIgnoreCase</code> in the <code>TodoService</code> and then make use of it in the <code>TodoRestController</code> by providing a <a href="http://localhost:8080/getBySummary" class="bare">http://localhost:8080/getBySummary</a> rest endpoint.</p>
</div>
<div class="paragraph">
<p>The schema possibilities for writing such methods are huge, but out of scope in this exercise.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can also write real queries by using the <code>@Query</code> annotation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Just pretend that a Todo has a category to see the @Query syntax</span>

<span class="annotation">@Query</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">from Todos a join a.category c where c.name=:categoryName</span><span class="delimiter">&quot;</span></span>)
Flux&lt;Todo&gt; findByCategory(<span class="annotation">@Param</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">categoryName</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">String</span> categoryName);</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-using-example-objects-for-queries"><a class="link" href="#exercise-using-example-objects-for-queries">25. Exercise: Using Example objects for queries</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>With the query method schema lots of properties of the <code>Todo</code> class can be combined for a query, but sometimes this can also be very verbose:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// could be even worse...</span>
Flux&lt;Todo&gt; findBySummaryContainingAndDescriptionContainingAllIgnoreCaseAndDoneIsTrue(<span class="predefined-type">String</span> summary, <span class="predefined-type">String</span> description);</code></pre>
</div>
</div>
<div class="paragraph">
<p>It would be nicer to create an instance of a <code>Todo</code> and then pass it to a find method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Todo todo = <span class="keyword">new</span> Todo(<span class="integer">1</span>);
Todo theTodoWithIdEquals1 = todoRepository.find(todo);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Unfortunately the <code>ReactiveCrudRepository</code> does not provide such a method.</p>
</div>
<div class="paragraph">
<p>But this capability is proivded by the <code>ReactiveQueryByExampleExecutor&lt;T&gt;</code> class.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/xReactiveQueryByExampleExecutor.png.pagespeed.ic.irXpkXmHh2.png" alt="ReactiveQueryByExampleExecutor" data-pagespeed-url-hash="1881134589" onload="pagespeed.CriticalImages.checkImageForCriticality(this);">
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.vogella.springboot2.data</span>;

<span class="keyword">import</span> <span class="include">org.springframework.data.repository.query.ReactiveQueryByExampleExecutor</span>;
<span class="keyword">import</span> <span class="include">org.springframework.data.repository.reactive.ReactiveCrudRepository</span>;

<span class="keyword">import</span> <span class="include">com.vogella.springboot2.domain.Todo</span>;

<span class="keyword">import</span> <span class="include">reactor.core.publisher.Flux</span>;

<span class="directive">public</span> <span class="type">interface</span> <span class="class">TodoRepository</span> <span class="directive">extends</span> ReactiveCrudRepository&lt;Todo, <span class="predefined-type">Long</span>&gt;, ReactiveQueryByExampleExecutor&lt;Todo&gt; { <i class="conum" data-value="1"></i><b>(1)</b>

    Flux&lt;Todo&gt; findBySummaryContainingIgnoreCase(<span class="predefined-type">String</span> textInSummary);

    Flux&lt;Todo&gt; findBySummaryContainingAndDescriptionContainingAllIgnoreCaseAndDoneIsTrue(<span class="predefined-type">String</span> summary, <span class="predefined-type">String</span> description);

}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>By implementing the <code>ReactiveQueryByExampleExecutor&lt;Todo&gt;</code> interface the methods above an be used to query by using <code>Example</code> objects.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>So instead of using a <code>findBySummaryContainingAndDescriptionContainingAllIgnoreCaseAndDoneIsTrue</code> method an <code>Example</code> can be used to express the same:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> Mono&lt;Todo&gt; findTodoByExample(Todo todo) {
    ExampleMatcher matcher = ExampleMatcher.matching().withIgnoreCase()
            .withMatcher(<span class="string"><span class="delimiter">&quot;</span><span class="content">summary</span><span class="delimiter">&quot;</span></span>, GenericPropertyMatcher::contains)
            .withMatcher(<span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>, GenericPropertyMatcher::contains)
            .withMatcher(<span class="string"><span class="delimiter">&quot;</span><span class="content">done</span><span class="delimiter">&quot;</span></span>, GenericPropertyMatcher::exact);
    Example&lt;Todo&gt; example = Example.of(todo, matcher);
    <span class="keyword">return</span> todoRepository.findOne(example);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When looking for exact matches no <code>ExampleMatcher</code> has to be configured.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> Mono&lt;Todo&gt; findTodoByExampleSimple(Todo todo) {
    Example&lt;Todo&gt; example = Example.of(todo);
    <span class="keyword">return</span> todoRepository.findOne(example);
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spring-boot-resources"><a class="link" href="#spring-boot-resources">26. Spring Boot resources</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-testing.html">Spring Boot test manual</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="vogella-training-and-consulting-support"><a class="link" href="#vogella-training-and-consulting-support">27. vogella training and consulting support</a></h2>
<div class="sectionbody">
<div class="about_vogella_container">
    <div class="about_vogella">
    	<a href="https://learn.vogella.com/">
            <img src="http://www.vogella.com/img/common/logo_very_rough_white.svg" alt="Online Training" title="Online Training" onclick="_gaq.push(['_trackEvent', 'Buttom tutorial', 'clicked', 'Online Training']);" data-pagespeed-url-hash="1161089963" onload="pagespeed.CriticalImages.checkImageForCriticality(this);"/>
			<h1>Online Training</h1>
		</a>
	</div>
	<div class="about_vogella">
    	<a href="http://www.vogella.com/training/">
            <i class="material-icons md-48 white" onclick="_gaq.push(['_trackEvent', 'Buttom tutorial', 'clicked', 'Onsite Training']);">
				fitness_center
			</i>
            <h1>Onsite Training</h1>
		</a>
	</div>
	<div class="about_vogella">
    	<a href="http://www.vogella.com/consulting/">
            <i class="material-icons md-48 white" onclick="_gaq.push(['_trackEvent', 'Buttom tutorial', 'clicked', 'Consulting']);">
				group
			</i>
            <h1>Consulting</h1>
		</a>
	</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="copyright-license-and-source-code"><a class="link" href="#copyright-license-and-source-code">Appendix A: Copyright, License and Source code</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Copyright &#169; 2012-2018 vogella GmbH.
Free use of the software examples is granted under the terms of the <a href="https://www.eclipse.org/legal/epl-2.0">Eclipse Public License 2.0</a>.
This tutorial is published under the  <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/de/deed.en">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Germany</a> license.</p>
</div>
<div class="paragraph">
<p><a href="http://www.vogella.com/license.html">Licence</a></p>
</div>
<div class="paragraph">
<p><a href="http://www.vogella.com/code/index.html">Source code</a></p>
</div>
<div class="paragraph">
<p><a href="http://www.vogella.com/support.html">Support free tutorials</a></p>
</div>
<img src="http://vg08.met.vgwort.de/na/bf5a23a3ef6d4fc683c9665634301a13" width="1" height="1" alt="" data-pagespeed-url-hash="982315917" onload="pagespeed.CriticalImages.checkImageForCriticality(this);"/>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 0.2<br>
Last updated 2018-10-25 11:39:46 +02:00
</div>
</div>
<script data-pagespeed-no-defer>//<![CDATA[
(function(){window.pagespeed=window.pagespeed||{};var f=window.pagespeed;function h(e,a,c,b){this.f=e;this.a=a;this.b=c;this.g=b}f.beaconUrl="";
function k(e){var a=e.f,c=window.mod_pagespeed_start,b=Number(new Date)-c,a=a+(-1==a.indexOf("?")?"?":"&"),a=a+"ets="+("load"==e.a?"load:":"unload:"),a=a+b;if("beforeunload"!=e.a||!window.mod_pagespeed_loaded){a+="&r"+e.a+"=";if(window.performance){var b=window.performance.timing,d=b.navigationStart,g=b.requestStart,a=a+(b[e.a+"EventStart"]-d),a=a+("&nav="+(b.fetchStart-d)),a=a+("&dns="+(b.domainLookupEnd-b.domainLookupStart)),a=a+("&connect="+(b.connectEnd-b.connectStart)),a=a+("&req_start="+(g-
d)),a=a+("&ttfb="+(b.responseStart-g)),a=a+("&dwld="+(b.responseEnd-b.responseStart)),a=a+("&dom_c="+(b.domContentLoadedEventStart-d));window.performance.navigation&&(a+="&nt="+window.performance.navigation.type);d=-1;b.msFirstPaint?d=b.msFirstPaint:window.chrome&&window.chrome.loadTimes&&(d=Math.floor(1E3*window.chrome.loadTimes().firstPaintTime));d=d-g;0<=d&&(a+="&fp="+d)}else a+=b;f.getResourceTimingData&&window.parent==window&&(a+=f.getResourceTimingData());a+=window.parent!=window?"&ifr=1":"&ifr=0";
"load"==e.a&&(window.mod_pagespeed_loaded=!0,(b=window.mod_pagespeed_num_resources_prefetched)&&(a+="&nrp="+b),(b=window.mod_pagespeed_prefetch_start)&&(a+="&htmlAt="+(c-b)));f.panelLoader&&(c=f.panelLoader.getCsiTimingsString(),""!=c&&(a+="&b_csi="+c));f.criticalCss&&(c=f.criticalCss,a+="&ccis="+c.total_critical_inlined_size+"&cces="+c.total_original_external_size+"&ccos="+c.total_overhead_size+"&ccrl="+c.num_replaced_links+"&ccul="+c.num_unreplaced_links);a+="&dpr="+window.devicePixelRatio;""!=
e.b&&(a+=e.b);document.referrer&&(a+="&ref="+encodeURIComponent(document.referrer));a+="&url="+encodeURIComponent(e.g);f.beaconUrl=a;(new Image).src=a}}f.c=function(e,a,c,b){var d=new h(e,a,c,b);window.addEventListener?window.addEventListener(a,function(){k(d)},!1):window.attachEvent("on"+a,function(){k(d)})};f.addInstrumentationInit=f.c;})();

pagespeed.addInstrumentationInit('/mod_pagespeed_beacon', 'load', '', 'http://www.vogella.com/tutorials/SpringBoot/article.html');
//]]></script></body>
</html>
